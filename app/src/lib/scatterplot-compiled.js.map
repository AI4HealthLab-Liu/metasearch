{"version":3,"sources":["scatterplot.js"],"names":[],"mappings":"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","file":"scatterplot-compiled.js","sourcesContent":["function scatterplot() {\n  var m = [30, 16, 16, 16],      // margins\n      w = 300-m[1]-m[3],         // width\n      h = 300-m[0]-m[2],         // height\n      xcol = 0,                  // active x column\n      ycol = 1,                  // active y column\n      data = [];\n\n  var svg, dimensions, key, extents;\n\n  // create scales\n  var x = d3.scale.linear().range([0, w]),\n      y = d3.scale.linear().range([h, 0]);\n\n  // color scale\n  var color = {\n    \"Baby Foods\"                        : '#555555',\n    \"Baked Products\"                    : '#7f7f7f',\n    \"Beverages\"                         : '#c49c94',\n    \"Breakfast Cereals\"                 : '#9467bd',\n    \"Cereal Grains and Pasta\"           : '#bcbd22',\n    \"Dairy and Egg Products\"            : '#ff7f0e',\n    \"Ethnic Foods\"                      : '#e7ba52',\n    \"Fast Foods\"                        : '#dbdb8d',\n    \"Fats and Oils\"                     : '#ffbb78',\n    \"Finfish and Shellfish Products\"    : '#e377c2',\n    \"Fruits and Fruit Juices\"           : '#c5b0d5',\n    \"Legumes and Legume Products\"       : '#f7b6d2',\n    \"Meals, Entrees, and Sidedishes\"    : '#17becf',\n    \"Nut and Seed Products\"             : '#8c564b',\n    \"Pork Products\"                     : \"#00ee99\",\n    \"Poultry Products\"                  : '#d62728',\n    \"Restaurant Foods\"                  : '#1f77b4',\n    \"Sausages and Luncheon Meats\"       : '#ff9896',\n    \"Snacks\"                            : '#9edae5',\n    \"Soups, Sauces, and Gravies\"        : '#98df8a',\n    \"Spices and Herbs\"                  : '#aec7e8',\n    \"Sweets\"                            : '#c7c7c7',\n    \"Vegetables and Vegetable Products\" : '#2ca02c'\n  };\n\n\n  function scatter(selection) {\n    // create svg element, adjusted by margins\n    svg = d3.select(selection)\n      .attr(\"width\", w + m[1] + m[3])\n      .attr(\"height\", w + m[0] + m[2])\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + m[3] + \",\" + m[0] + \")\");\n\n    // get columns of csv, mark excluded columns\n    var columns = d3.keys( data[0] ),\n        excluded = ['name', 'group', 'id'];\n\n    // get quantitative dimensions\n    dimensions = _(columns)\n      .difference(excluded);\n\n    // extents for each dimension\n    extents = _(dimensions)\n      .map(function(col) {\n        return [0, d3.max(data, function(d) { return parseFloat(d[col]) })]\n      });\n\n    scatter.update();\n  };\n\n  scatter.show = function(shown) {\n    update = svg.selectAll('circle')\n      .style(\"display\", function(d) { return shown.indexOf(d) > -1 ? null : \"none\"; });\n  };\n  \n  scatter.update = function() {\n    x.domain(extents[[xcol]]);\n    y.domain(extents[[ycol]]);\n\n    var update = svg.selectAll('circle')\n       .data(data, key ? key : undefined);\n\n    update.enter().append('circle')\n       .attr(\"fill\", function(d) { return color[d.group]; })\n       .attr(\"cx\", function(d) { return x(d[dimensions[xcol]]); })\n       .attr(\"cy\", function(d) { return y(d[dimensions[ycol]]); })\n       .attr(\"r\", 2)\n       .on(\"mouseover\", function(d) {\n         d3.select('#hover-food').text(d.name.substr(0,50));\n       });\n\n    update.exit().remove();\n\n    update\n      .attr(\"cx\", function(d) { return x(d[dimensions[xcol]]); })\n      .attr(\"cy\", function(d) { return y(d[dimensions[ycol]]); });\n\n    return scatter;\n  };\n\n  scatter.data = function(d) {\n    if (!arguments.length) return data;\n    data = d; \n    return scatter;\n  };\n\n  scatter.key = function(d) {\n    if (!arguments.length) return key;\n    key = d; \n    return scatter;\n  };\n\n  scatter.width = function(d) {\n    if (!arguments.length) return w + m[1] + m[3];\n    w = d-m[1]-m[3];\n    x = d3.scale.linear().range([0, w]);\n    return scatter;\n  };\n\n  scatter.height = function(d) {\n    if (!arguments.length) return h + m[0] + m[2];\n    h = d-m[0]-m[2];\n    y = d3.scale.linear().range([h, 0]);\n    return scatter;\n  };\n\n  return scatter;\n};\n"]}