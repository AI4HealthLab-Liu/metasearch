{"version":3,"sources":["slick.grid.js"],"names":[],"mappings":"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","file":"slick.grid-compiled.js","sourcesContent":["/**\n * @license\n * (c) 2009-2012 Michael Leibman\n * michael{dot}leibman{at}gmail{dot}com\n * http://github.com/mleibman/slickgrid\n *\n * Distributed under MIT license.\n * All rights reserved.\n *\n * SlickGrid v2.1\n *\n * NOTES:\n *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.\n *     This increases the speed dramatically, but can only be done safely because there are no event handlers\n *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()\n *     and do proper cleanup.\n */\n\n// make sure required JavaScript modules are loaded\nif (typeof jQuery === \"undefined\") {\n  throw \"SlickGrid requires jquery module to be loaded\";\n}\nif (!jQuery.fn.drag) {\n  throw \"SlickGrid requires jquery.event.drag module to be loaded\";\n}\nif (typeof Slick === \"undefined\") {\n  throw \"slick.core.js not loaded\";\n}\n\n\n(function ($) {\n  // Slick.Grid\n  $.extend(true, window, {\n    Slick: {\n      Grid: SlickGrid\n    }\n  });\n\n  // shared across all grids on the page\n  var scrollbarDimensions;\n  var maxSupportedCssHeight;  // browser's breaking point\n\n  //////////////////////////////////////////////////////////////////////////////////////////////\n  // SlickGrid class implementation (available as Slick.Grid)\n\n  /**\n   * Creates a new instance of the grid.\n   * @class SlickGrid\n   * @constructor\n   * @param {Node}              container   Container node to create the grid in.\n   * @param {Array,Object}      data        An array of objects for databinding.\n   * @param {Array}             columns     An array of column definitions.\n   * @param {Object}            options     Grid options.\n   **/\n  function SlickGrid(container, data, columns, options) {\n    // settings\n    var defaults = {\n      explicitInitialization: false,\n      rowHeight: 25,\n      defaultColumnWidth: 80,\n      enableAddRow: false,\n      leaveSpaceForNewRows: false,\n      editable: false,\n      autoEdit: true,\n      enableCellNavigation: true,\n      enableColumnReorder: true,\n      asyncEditorLoading: false,\n      asyncEditorLoadDelay: 100,\n      forceFitColumns: false,\n      enableAsyncPostRender: false,\n      asyncPostRenderDelay: 50,\n      autoHeight: false,\n      editorLock: Slick.GlobalEditorLock,\n      showHeaderRow: false,\n      headerRowHeight: 25,\n      showTopPanel: false,\n      topPanelHeight: 25,\n      formatterFactory: null,\n      editorFactory: null,\n      cellFlashingCssClass: \"flashing\",\n      selectedCellCssClass: \"selected\",\n      multiSelect: true,\n      enableTextSelectionOnCells: false,\n      dataItemColumnValueExtractor: null,\n      fullWidthRows: false,\n      multiColumnSort: false,\n      defaultFormatter: defaultFormatter,\n      forceSyncScrolling: false\n    };\n\n    var columnDefaults = {\n      name: \"\",\n      resizable: true,\n      sortable: false,\n      minWidth: 30,\n      rerenderOnResize: false,\n      headerCssClass: null,\n      defaultSortAsc: true\n    };\n\n    // scroller\n    var th;   // virtual height\n    var h;    // real scrollable height\n    var ph;   // page height\n    var n;    // number of pages\n    var cj;   // \"jumpiness\" coefficient\n\n    var page = 0;       // current page\n    var offset = 0;     // current page offset\n    var vScrollDir = 1;\n\n    // private\n    var initialized = false;\n    var $container;\n    var uid = \"slickgrid_\" + Math.round(1000000 * Math.random());\n    var self = this;\n    var $focusSink;\n    var $headerScroller;\n    var $headers;\n    var $headerRow, $headerRowScroller, $headerRowSpacer;\n    var $topPanelScroller;\n    var $topPanel;\n    var $viewport;\n    var $canvas;\n    var $style;\n    var $boundAncestors;\n    var stylesheet, columnCssRulesL, columnCssRulesR;\n    var viewportH, viewportW;\n    var canvasWidth;\n    var viewportHasHScroll, viewportHasVScroll;\n    var headerColumnWidthDiff = 0, headerColumnHeightDiff = 0, // border+padding\n        cellWidthDiff = 0, cellHeightDiff = 0;\n    var absoluteColumnMinWidth;\n    var numberOfRows = 0;\n\n    var activePosX;\n    var activeRow, activeCell;\n    var activeCellNode = null;\n    var currentEditor = null;\n    var serializedEditorValue;\n    var editController;\n\n    var rowsCache = {};\n    var renderedRows = 0;\n    var numVisibleRows;\n    var prevScrollTop = 0;\n    var scrollTop = 0;\n    var lastRenderedScrollTop = 0;\n    var lastRenderedScrollLeft = 0;\n    var prevScrollLeft = 0;\n    var scrollLeft = 0;\n\n    var selectionModel;\n    var selectedRows = [];\n\n    var plugins = [];\n    var cellCssClasses = {};\n\n    var columnsById = {};\n    var sortColumns = [];\n    var columnPosLeft = [];\n    var columnPosRight = [];\n\n\n    // async call handles\n    var h_editorLoader = null;\n    var h_render = null;\n    var h_postrender = null;\n    var postProcessedRows = {};\n    var postProcessToRow = null;\n    var postProcessFromRow = null;\n\n    // perf counters\n    var counter_rows_rendered = 0;\n    var counter_rows_removed = 0;\n\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Initialization\n\n    function init() {\n      $container = $(container);\n      if ($container.length < 1) {\n        throw new Error(\"SlickGrid requires a valid container, \" + container + \" does not exist in the DOM.\");\n      }\n\n      // calculate these only once and share between grid instances\n      maxSupportedCssHeight = maxSupportedCssHeight || getMaxSupportedCssHeight();\n      scrollbarDimensions = scrollbarDimensions || measureScrollbar();\n\n      options = $.extend({}, defaults, options);\n      validateAndEnforceOptions();\n      columnDefaults.width = options.defaultColumnWidth;\n\n      columnsById = {};\n      for (var i = 0; i < columns.length; i++) {\n        var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n        columnsById[m.id] = i;\n        if (m.minWidth && m.width < m.minWidth) {\n          m.width = m.minWidth;\n        }\n        if (m.maxWidth && m.width > m.maxWidth) {\n          m.width = m.maxWidth;\n        }\n      }\n\n      // validate loaded JavaScript modules against requested options\n      if (options.enableColumnReorder && !$.fn.sortable) {\n        throw new Error(\"SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded\");\n      }\n\n      editController = {\n        \"commitCurrentEdit\": commitCurrentEdit,\n        \"cancelCurrentEdit\": cancelCurrentEdit\n      };\n\n      $container\n          .empty()\n          .css(\"overflow\", \"hidden\")\n          .css(\"outline\", 0)\n          .addClass(uid)\n          .addClass(\"ui-widget\");\n\n      // set up a positioning container if needed\n      if (!/relative|absolute|fixed/.test($container.css(\"position\"))) {\n        $container.css(\"position\", \"relative\");\n      }\n\n      $focusSink = $(\"<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>\").appendTo($container);\n\n      $headerScroller = $(\"<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n      $headers = $(\"<div class='slick-header-columns' style='left:-1000px' />\").appendTo($headerScroller);\n      $headers.width(getHeadersWidth());\n\n      $headerRowScroller = $(\"<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n      $headerRow = $(\"<div class='slick-headerrow-columns' />\").appendTo($headerRowScroller);\n      $headerRowSpacer = $(\"<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>\")\n          .css(\"width\", getCanvasWidth() + scrollbarDimensions.width + \"px\")\n          .appendTo($headerRowScroller);\n\n      $topPanelScroller = $(\"<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />\").appendTo($container);\n      $topPanel = $(\"<div class='slick-top-panel' style='width:10000px' />\").appendTo($topPanelScroller);\n\n      if (!options.showTopPanel) {\n        $topPanelScroller.hide();\n      }\n\n      if (!options.showHeaderRow) {\n        $headerRowScroller.hide();\n      }\n\n      $viewport = $(\"<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>\").appendTo($container);\n      $viewport.css(\"overflow-y\", options.autoHeight ? \"hidden\" : \"auto\");\n\n      $canvas = $(\"<div class='grid-canvas' />\").appendTo($viewport);\n\n      if (!options.explicitInitialization) {\n        finishInitialization();\n      }\n    }\n\n    function finishInitialization() {\n      if (!initialized) {\n        initialized = true;\n\n        viewportW = parseFloat($.css($container[0], \"width\", true));\n\n        // header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)\n        // calculate the diff so we can set consistent sizes\n        measureCellPaddingAndBorder();\n\n        // for usability reasons, all text selection in SlickGrid is disabled\n        // with the exception of input and textarea elements (selection must\n        // be enabled there so that editors work as expected); note that\n        // selection in grid cells (grid body) is already unavailable in\n        // all browsers except IE\n        disableSelection($headers); // disable all text selection in header (including input and textarea)\n\n        if (!options.enableTextSelectionOnCells) {\n          // disable text selection in grid cells except in input and textarea elements\n          // (this is IE-specific, because selectstart event will only fire in IE)\n          $viewport.bind(\"selectstart.ui\", function (event) {\n            return $(event.target).is(\"input,textarea\");\n          });\n        }\n\n        updateColumnCaches();\n        createColumnHeaders();\n        setupColumnSort();\n        createCssRules();\n        resizeCanvas();\n        bindAncestorScrollEvents();\n\n        $container\n            .bind(\"resize.slickgrid\", resizeCanvas);\n        $viewport\n            .bind(\"scroll\", handleScroll);\n        $headerScroller\n            .bind(\"contextmenu\", handleHeaderContextMenu)\n            .bind(\"click\", handleHeaderClick)\n            .delegate(\".slick-header-column\", \"mouseenter\", handleHeaderMouseEnter)\n            .delegate(\".slick-header-column\", \"mouseleave\", handleHeaderMouseLeave);\n        $headerRowScroller\n            .bind(\"scroll\", handleHeaderRowScroll);\n        $focusSink\n            .bind(\"keydown\", handleKeyDown);\n        $canvas\n            .bind(\"keydown\", handleKeyDown)\n            .bind(\"click\", handleClick)\n            .bind(\"dblclick\", handleDblClick)\n            .bind(\"contextmenu\", handleContextMenu)\n            .bind(\"draginit\", handleDragInit)\n            .bind(\"dragstart\", handleDragStart)\n            .bind(\"drag\", handleDrag)\n            .bind(\"dragend\", handleDragEnd)\n            .delegate(\".slick-cell\", \"mouseenter\", handleMouseEnter)\n            .delegate(\".slick-cell\", \"mouseleave\", handleMouseLeave);\n      }\n    }\n\n    function registerPlugin(plugin) {\n      plugins.unshift(plugin);\n      plugin.init(self);\n    }\n\n    function unregisterPlugin(plugin) {\n      for (var i = plugins.length; i >= 0; i--) {\n        if (plugins[i] === plugin) {\n          if (plugins[i].destroy) {\n            plugins[i].destroy();\n          }\n          plugins.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    function setSelectionModel(model) {\n      if (selectionModel) {\n        selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);\n        if (selectionModel.destroy) {\n          selectionModel.destroy();\n        }\n      }\n\n      selectionModel = model;\n      if (selectionModel) {\n        selectionModel.init(self);\n        selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);\n      }\n    }\n\n    function getSelectionModel() {\n      return selectionModel;\n    }\n\n    function getCanvasNode() {\n      return $canvas[0];\n    }\n\n    function measureScrollbar() {\n      var $c = $(\"<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>\").appendTo(\"body\");\n      var dim = {\n        width: $c.width() - $c[0].clientWidth,\n        height: $c.height() - $c[0].clientHeight\n      };\n      $c.remove();\n      return dim;\n    }\n\n    function getHeadersWidth() {\n      var headersWidth = 0;\n      for (var i = 0, ii = columns.length; i < ii; i++) {\n        var width = columns[i].width;\n        headersWidth += width;\n      }\n      headersWidth += scrollbarDimensions.width;\n      return Math.max(headersWidth, viewportW) + 1000;\n    }\n\n    function getCanvasWidth() {\n      var availableWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n      var rowWidth = 0;\n      var i = columns.length;\n      while (i--) {\n        rowWidth += columns[i].width;\n      }\n      return options.fullWidthRows ? Math.max(rowWidth, availableWidth) : rowWidth;\n    }\n\n    function updateCanvasWidth(forceColumnWidthsUpdate) {\n      var oldCanvasWidth = canvasWidth;\n      canvasWidth = getCanvasWidth();\n\n      if (canvasWidth != oldCanvasWidth) {\n        $canvas.width(canvasWidth);\n        $headerRow.width(canvasWidth);\n        $headers.width(getHeadersWidth());\n        viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);\n      }\n\n      $headerRowSpacer.width(canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0));\n\n      if (canvasWidth != oldCanvasWidth || forceColumnWidthsUpdate) {\n        applyColumnWidths();\n      }\n    }\n\n    function disableSelection($target) {\n      if ($target && $target.jquery) {\n        $target\n            .attr(\"unselectable\", \"on\")\n            .css(\"MozUserSelect\", \"none\")\n            .bind(\"selectstart.ui\", function () {\n              return false;\n            }); // from jquery:ui.core.js 1.7.2\n      }\n    }\n\n    function getMaxSupportedCssHeight() {\n      var supportedHeight = 1000000;\n      // FF reports the height back but still renders blank after ~6M px\n      var testUpTo = ($.browser.mozilla) ? 6000000 : 1000000000;\n      var div = $(\"<div style='display:none' />\").appendTo(document.body);\n\n      while (true) {\n        var test = supportedHeight * 2;\n        div.css(\"height\", test);\n        if (test > testUpTo || div.height() !== test) {\n          break;\n        } else {\n          supportedHeight = test;\n        }\n      }\n\n      div.remove();\n      return supportedHeight;\n    }\n\n    // TODO:  this is static.  need to handle page mutation.\n    function bindAncestorScrollEvents() {\n      var elem = $canvas[0];\n      while ((elem = elem.parentNode) != document.body && elem != null) {\n        // bind to scroll containers only\n        if (elem == $viewport[0] || elem.scrollWidth != elem.clientWidth || elem.scrollHeight != elem.clientHeight) {\n          var $elem = $(elem);\n          if (!$boundAncestors) {\n            $boundAncestors = $elem;\n          } else {\n            $boundAncestors = $boundAncestors.add($elem);\n          }\n          $elem.bind(\"scroll.\" + uid, handleActiveCellPositionChange);\n        }\n      }\n    }\n\n    function unbindAncestorScrollEvents() {\n      if (!$boundAncestors) {\n        return;\n      }\n      $boundAncestors.unbind(\"scroll.\" + uid);\n      $boundAncestors = null;\n    }\n\n    function updateColumnHeader(columnId, title, toolTip) {\n      if (!initialized) { return; }\n      var idx = getColumnIndex(columnId);\n      if (idx == null) {\n        return;\n      }\n\n      var columnDef = columns[idx];\n      var $header = $headers.children().eq(idx);\n      if ($header) {\n        if (title !== undefined) {\n          columns[idx].name = title;\n        }\n        if (toolTip !== undefined) {\n          columns[idx].toolTip = toolTip;\n        }\n\n        trigger(self.onBeforeHeaderCellDestroy, {\n          \"node\": $header[0],\n          \"column\": columnDef\n        });\n\n        $header\n            .attr(\"title\", toolTip || \"\")\n            .children().eq(0).html(title);\n\n        trigger(self.onHeaderCellRendered, {\n          \"node\": $header[0],\n          \"column\": columnDef\n        });\n      }\n    }\n\n    function getHeaderRow() {\n      return $headerRow[0];\n    }\n\n    function getHeaderRowColumn(columnId) {\n      var idx = getColumnIndex(columnId);\n      var $header = $headerRow.children().eq(idx);\n      return $header && $header[0];\n    }\n\n    function createColumnHeaders() {\n      function hoverBegin() {\n        $(this).addClass(\"ui-state-hover\");\n      }\n\n      function hoverEnd() {\n        $(this).removeClass(\"ui-state-hover\");\n      }\n\n      $headers.find(\".slick-header-column\")\n        .each(function() {\n          var columnDef = $(this).data(\"column\");\n          if (columnDef) {\n            trigger(self.onBeforeHeaderCellDestroy, {\n              \"node\": this,\n              \"column\": columnDef\n            });\n          }\n        });\n      $headers.empty();\n      $headers.width(getHeadersWidth());\n\n      $headerRow.find(\".slick-headerrow-column\")\n        .each(function() {\n          var columnDef = $(this).data(\"column\");\n          if (columnDef) {\n            trigger(self.onBeforeHeaderRowCellDestroy, {\n              \"node\": this,\n              \"column\": columnDef\n            });\n          }\n        });\n      $headerRow.empty();\n\n      for (var i = 0; i < columns.length; i++) {\n        var m = columns[i];\n\n        var header = $(\"<div class='ui-state-default slick-header-column' id='\" + uid + m.id + \"' />\")\n            .html(\"<span class='slick-column-name'>\" + m.name + \"</span>\")\n            .width(m.width - headerColumnWidthDiff)\n            .attr(\"title\", m.toolTip || \"\")\n            .data(\"column\", m)\n            .addClass(m.headerCssClass || \"\")\n            .appendTo($headers);\n\n        if (options.enableColumnReorder || m.sortable) {\n          header.hover(hoverBegin, hoverEnd);\n        }\n\n        if (m.sortable) {\n          header.append(\"<span class='slick-sort-indicator' />\");\n        }\n\n        trigger(self.onHeaderCellRendered, {\n          \"node\": header[0],\n          \"column\": m\n        });\n\n        if (options.showHeaderRow) {\n          var headerRowCell = $(\"<div class='ui-state-default slick-headerrow-column l\" + i + \" r\" + i + \"'></div>\")\n              .data(\"column\", m)\n              .appendTo($headerRow);\n\n          trigger(self.onHeaderRowCellRendered, {\n            \"node\": headerRowCell[0],\n            \"column\": m\n          });\n        }\n      }\n\n      setSortColumns(sortColumns);\n      setupColumnResize();\n      if (options.enableColumnReorder) {\n        setupColumnReorder();\n      }\n    }\n\n    function setupColumnSort() {\n      $headers.click(function (e) {\n        // temporary workaround for a bug in jQuery 1.7.1 (http://bugs.jquery.com/ticket/11328)\n        e.metaKey = e.metaKey || e.ctrlKey;\n\n        if ($(e.target).hasClass(\"slick-resizable-handle\")) {\n          return;\n        }\n\n        var $col = $(e.target).closest(\".slick-header-column\");\n        if (!$col.length) {\n          return;\n        }\n\n        var column = $col.data(\"column\");\n        if (column.sortable) {\n          if (!getEditorLock().commitCurrentEdit()) {\n            return;\n          }\n\n          var sortOpts = null;\n          var i = 0;\n          for (; i < sortColumns.length; i++) {\n            if (sortColumns[i].columnId == column.id) {\n              sortOpts = sortColumns[i];\n              sortOpts.sortAsc = !sortOpts.sortAsc;\n              break;\n            }\n          }\n\n          if (e.metaKey && options.multiColumnSort) {\n            if (sortOpts) {\n              sortColumns.splice(i, 1);\n            }\n          }\n          else {\n            if ((!e.shiftKey && !e.metaKey) || !options.multiColumnSort) {\n              sortColumns = [];\n            }\n\n            if (!sortOpts) {\n              sortOpts = { columnId: column.id, sortAsc: column.defaultSortAsc };\n              sortColumns.push(sortOpts);\n            } else if (sortColumns.length == 0) {\n              sortColumns.push(sortOpts);\n            }\n          }\n\n          setSortColumns(sortColumns);\n\n          if (!options.multiColumnSort) {\n            trigger(self.onSort, {\n              multiColumnSort: false,\n              sortCol: column,\n              sortAsc: sortOpts.sortAsc}, e);\n          } else {\n            trigger(self.onSort, {\n              multiColumnSort: true,\n              sortCols: $.map(sortColumns, function(col) {\n                return {sortCol: columns[getColumnIndex(col.columnId)], sortAsc: col.sortAsc };\n              })}, e);\n          }\n        }\n      });\n    }\n\n    function setupColumnReorder() {\n      $headers.sortable(\"destroy\");\n      $headers.sortable({\n        containment: \"parent\",\n        axis: \"x\",\n        cursor: \"default\",\n        tolerance: \"intersection\",\n        helper: \"clone\",\n        placeholder: \"slick-sortable-placeholder ui-state-default slick-header-column\",\n        forcePlaceholderSize: true,\n        start: function (e, ui) {\n          $(ui.helper).addClass(\"slick-header-column-active\");\n        },\n        beforeStop: function (e, ui) {\n          $(ui.helper).removeClass(\"slick-header-column-active\");\n        },\n        stop: function (e) {\n          if (!getEditorLock().commitCurrentEdit()) {\n            $(this).sortable(\"cancel\");\n            return;\n          }\n\n          var reorderedIds = $headers.sortable(\"toArray\");\n          var reorderedColumns = [];\n          for (var i = 0; i < reorderedIds.length; i++) {\n            reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid, \"\"))]);\n          }\n          setColumns(reorderedColumns);\n\n          trigger(self.onColumnsReordered, {});\n          e.stopPropagation();\n          setupColumnResize();\n        }\n      });\n    }\n\n    function setupColumnResize() {\n      var $col, j, c, pageX, columnElements, minPageX, maxPageX, firstResizable, lastResizable;\n      columnElements = $headers.children();\n      columnElements.find(\".slick-resizable-handle\").remove();\n      columnElements.each(function (i, e) {\n        if (columns[i].resizable) {\n          if (firstResizable === undefined) {\n            firstResizable = i;\n          }\n          lastResizable = i;\n        }\n      });\n      if (firstResizable === undefined) {\n        return;\n      }\n      columnElements.each(function (i, e) {\n        if (i < firstResizable || (options.forceFitColumns && i >= lastResizable)) {\n          return;\n        }\n        $col = $(e);\n        $(\"<div class='slick-resizable-handle' />\")\n            .appendTo(e)\n            .bind(\"dragstart\", function (e, dd) {\n              if (!getEditorLock().commitCurrentEdit()) {\n                return false;\n              }\n              pageX = e.pageX;\n              $(this).parent().addClass(\"slick-header-column-active\");\n              var shrinkLeewayOnRight = null, stretchLeewayOnRight = null;\n              // lock each column's width option to current width\n              columnElements.each(function (i, e) {\n                columns[i].previousWidth = $(e).outerWidth();\n              });\n              if (options.forceFitColumns) {\n                shrinkLeewayOnRight = 0;\n                stretchLeewayOnRight = 0;\n                // colums on right affect maxPageX/minPageX\n                for (j = i + 1; j < columnElements.length; j++) {\n                  c = columns[j];\n                  if (c.resizable) {\n                    if (stretchLeewayOnRight !== null) {\n                      if (c.maxWidth) {\n                        stretchLeewayOnRight += c.maxWidth - c.previousWidth;\n                      } else {\n                        stretchLeewayOnRight = null;\n                      }\n                    }\n                    shrinkLeewayOnRight += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);\n                  }\n                }\n              }\n              var shrinkLeewayOnLeft = 0, stretchLeewayOnLeft = 0;\n              for (j = 0; j <= i; j++) {\n                // columns on left only affect minPageX\n                c = columns[j];\n                if (c.resizable) {\n                  if (stretchLeewayOnLeft !== null) {\n                    if (c.maxWidth) {\n                      stretchLeewayOnLeft += c.maxWidth - c.previousWidth;\n                    } else {\n                      stretchLeewayOnLeft = null;\n                    }\n                  }\n                  shrinkLeewayOnLeft += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);\n                }\n              }\n              if (shrinkLeewayOnRight === null) {\n                shrinkLeewayOnRight = 100000;\n              }\n              if (shrinkLeewayOnLeft === null) {\n                shrinkLeewayOnLeft = 100000;\n              }\n              if (stretchLeewayOnRight === null) {\n                stretchLeewayOnRight = 100000;\n              }\n              if (stretchLeewayOnLeft === null) {\n                stretchLeewayOnLeft = 100000;\n              }\n              maxPageX = pageX + Math.min(shrinkLeewayOnRight, stretchLeewayOnLeft);\n              minPageX = pageX - Math.min(shrinkLeewayOnLeft, stretchLeewayOnRight);\n            })\n            .bind(\"drag\", function (e, dd) {\n              var actualMinWidth, d = Math.min(maxPageX, Math.max(minPageX, e.pageX)) - pageX, x;\n              if (d < 0) { // shrink column\n                x = d;\n                for (j = i; j >= 0; j--) {\n                  c = columns[j];\n                  if (c.resizable) {\n                    actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);\n                    if (x && c.previousWidth + x < actualMinWidth) {\n                      x += c.previousWidth - actualMinWidth;\n                      c.width = actualMinWidth;\n                    } else {\n                      c.width = c.previousWidth + x;\n                      x = 0;\n                    }\n                  }\n                }\n\n                if (options.forceFitColumns) {\n                  x = -d;\n                  for (j = i + 1; j < columnElements.length; j++) {\n                    c = columns[j];\n                    if (c.resizable) {\n                      if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {\n                        x -= c.maxWidth - c.previousWidth;\n                        c.width = c.maxWidth;\n                      } else {\n                        c.width = c.previousWidth + x;\n                        x = 0;\n                      }\n                    }\n                  }\n                }\n              } else { // stretch column\n                x = d;\n                for (j = i; j >= 0; j--) {\n                  c = columns[j];\n                  if (c.resizable) {\n                    if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {\n                      x -= c.maxWidth - c.previousWidth;\n                      c.width = c.maxWidth;\n                    } else {\n                      c.width = c.previousWidth + x;\n                      x = 0;\n                    }\n                  }\n                }\n\n                if (options.forceFitColumns) {\n                  x = -d;\n                  for (j = i + 1; j < columnElements.length; j++) {\n                    c = columns[j];\n                    if (c.resizable) {\n                      actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);\n                      if (x && c.previousWidth + x < actualMinWidth) {\n                        x += c.previousWidth - actualMinWidth;\n                        c.width = actualMinWidth;\n                      } else {\n                        c.width = c.previousWidth + x;\n                        x = 0;\n                      }\n                    }\n                  }\n                }\n              }\n              applyColumnHeaderWidths();\n              if (options.syncColumnCellResize) {\n                applyColumnWidths();\n              }\n            })\n            .bind(\"dragend\", function (e, dd) {\n              var newWidth;\n              $(this).parent().removeClass(\"slick-header-column-active\");\n              for (j = 0; j < columnElements.length; j++) {\n                c = columns[j];\n                newWidth = $(columnElements[j]).outerWidth();\n\n                if (c.previousWidth !== newWidth && c.rerenderOnResize) {\n                  invalidateAllRows();\n                }\n              }\n              updateCanvasWidth(true);\n              render();\n              trigger(self.onColumnsResized, {});\n            });\n      });\n    }\n\n    function getVBoxDelta($el) {\n      var p = [\"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"];\n      var delta = 0;\n      $.each(p, function (n, val) {\n        delta += parseFloat($el.css(val)) || 0;\n      });\n      return delta;\n    }\n\n    function measureCellPaddingAndBorder() {\n      var el;\n      var h = [\"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\"];\n      var v = [\"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"];\n\n      el = $(\"<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>\").appendTo($headers);\n      headerColumnWidthDiff = headerColumnHeightDiff = 0;\n      $.each(h, function (n, val) {\n        headerColumnWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function (n, val) {\n        headerColumnHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n      el.remove();\n\n      var r = $(\"<div class='slick-row' />\").appendTo($canvas);\n      el = $(\"<div class='slick-cell' id='' style='visibility:hidden'>-</div>\").appendTo(r);\n      cellWidthDiff = cellHeightDiff = 0;\n      $.each(h, function (n, val) {\n        cellWidthDiff += parseFloat(el.css(val)) || 0;\n      });\n      $.each(v, function (n, val) {\n        cellHeightDiff += parseFloat(el.css(val)) || 0;\n      });\n      r.remove();\n\n      absoluteColumnMinWidth = Math.max(headerColumnWidthDiff, cellWidthDiff);\n    }\n\n    function createCssRules() {\n      $style = $(\"<style type='text/css' rel='stylesheet' />\").appendTo($(\"head\"));\n      var rowHeight = (options.rowHeight - cellHeightDiff);\n      var rules = [\n        \".\" + uid + \" .slick-header-column { left: 1000px; }\",\n        \".\" + uid + \" .slick-top-panel { height:\" + options.topPanelHeight + \"px; }\",\n        \".\" + uid + \" .slick-headerrow-columns { height:\" + options.headerRowHeight + \"px; }\",\n        \".\" + uid + \" .slick-cell { height:\" + rowHeight + \"px; }\",\n        \".\" + uid + \" .slick-row { height:\" + options.rowHeight + \"px; }\"\n      ];\n\n      for (var i = 0; i < columns.length; i++) {\n        rules.push(\".\" + uid + \" .l\" + i + \" { }\");\n        rules.push(\".\" + uid + \" .r\" + i + \" { }\");\n      }\n\n      if ($style[0].styleSheet) { // IE\n        $style[0].styleSheet.cssText = rules.join(\" \");\n      } else {\n        $style[0].appendChild(document.createTextNode(rules.join(\" \")));\n      }\n    }\n\n    function getColumnCssRules(idx) {\n      if (!stylesheet) {\n        var sheets = document.styleSheets;\n        for (var i = 0; i < sheets.length; i++) {\n          if ((sheets[i].ownerNode || sheets[i].owningElement) == $style[0]) {\n            stylesheet = sheets[i];\n            break;\n          }\n        }\n\n        if (!stylesheet) {\n          throw new Error(\"Cannot find stylesheet.\");\n        }\n\n        // find and cache column CSS rules\n        columnCssRulesL = [];\n        columnCssRulesR = [];\n        var cssRules = (stylesheet.cssRules || stylesheet.rules);\n        var matches, columnIdx;\n        for (var i = 0; i < cssRules.length; i++) {\n          var selector = cssRules[i].selectorText;\n          if (matches = /\\.l\\d+/.exec(selector)) {\n            columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n            columnCssRulesL[columnIdx] = cssRules[i];\n          } else if (matches = /\\.r\\d+/.exec(selector)) {\n            columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\n            columnCssRulesR[columnIdx] = cssRules[i];\n          }\n        }\n      }\n\n      return {\n        \"left\": columnCssRulesL[idx],\n        \"right\": columnCssRulesR[idx]\n      };\n    }\n\n    function removeCssRules() {\n      $style.remove();\n      stylesheet = null;\n    }\n\n    function destroy() {\n      getEditorLock().cancelCurrentEdit();\n\n      trigger(self.onBeforeDestroy, {});\n\n      var i = plugins.length;\n      while(i--) {\n        unregisterPlugin(plugins[i]);\n      }\n\n      if (options.enableColumnReorder && $headers.sortable) {\n        $headers.sortable(\"destroy\");\n      }\n\n      unbindAncestorScrollEvents();\n      $container.unbind(\".slickgrid\");\n      removeCssRules();\n\n      $canvas.unbind(\"draginit dragstart dragend drag\");\n      $container.empty().removeClass(uid);\n    }\n\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // General\n\n    function trigger(evt, args, e) {\n      e = e || new Slick.EventData();\n      args = args || {};\n      args.grid = self;\n      return evt.notify(args, e, self);\n    }\n\n    function getEditorLock() {\n      return options.editorLock;\n    }\n\n    function getEditController() {\n      return editController;\n    }\n\n    function getColumnIndex(id) {\n      return columnsById[id];\n    }\n\n    function autosizeColumns() {\n      var i, c,\n          widths = [],\n          shrinkLeeway = 0,\n          total = 0,\n          prevTotal,\n          availWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;\n\n      for (i = 0; i < columns.length; i++) {\n        c = columns[i];\n        widths.push(c.width);\n        total += c.width;\n        if (c.resizable) {\n          shrinkLeeway += c.width - Math.max(c.minWidth, absoluteColumnMinWidth);\n        }\n      }\n\n      // shrink\n      prevTotal = total;\n      while (total > availWidth && shrinkLeeway) {\n        var shrinkProportion = (total - availWidth) / shrinkLeeway;\n        for (i = 0; i < columns.length && total > availWidth; i++) {\n          c = columns[i];\n          var width = widths[i];\n          if (!c.resizable || width <= c.minWidth || width <= absoluteColumnMinWidth) {\n            continue;\n          }\n          var absMinWidth = Math.max(c.minWidth, absoluteColumnMinWidth);\n          var shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;\n          shrinkSize = Math.min(shrinkSize, width - absMinWidth);\n          total -= shrinkSize;\n          shrinkLeeway -= shrinkSize;\n          widths[i] -= shrinkSize;\n        }\n        if (prevTotal == total) {  // avoid infinite loop\n          break;\n        }\n        prevTotal = total;\n      }\n\n      // grow\n      prevTotal = total;\n      while (total < availWidth) {\n        var growProportion = availWidth / total;\n        for (i = 0; i < columns.length && total < availWidth; i++) {\n          c = columns[i];\n          if (!c.resizable || c.maxWidth <= c.width) {\n            continue;\n          }\n          var growSize = Math.min(Math.floor(growProportion * c.width) - c.width, (c.maxWidth - c.width) || 1000000) || 1;\n          total += growSize;\n          widths[i] += growSize;\n        }\n        if (prevTotal == total) {  // avoid infinite loop\n          break;\n        }\n        prevTotal = total;\n      }\n\n      var reRender = false;\n      for (i = 0; i < columns.length; i++) {\n        if (columns[i].rerenderOnResize && columns[i].width != widths[i]) {\n          reRender = true;\n        }\n        columns[i].width = widths[i];\n      }\n\n      applyColumnHeaderWidths();\n      updateCanvasWidth(true);\n      if (reRender) {\n        invalidateAllRows();\n        render();\n      }\n    }\n\n    function applyColumnHeaderWidths() {\n      if (!initialized) { return; }\n      var h;\n      for (var i = 0, headers = $headers.children(), ii = headers.length; i < ii; i++) {\n        h = $(headers[i]);\n        if (h.width() !== columns[i].width - headerColumnWidthDiff) {\n          h.width(columns[i].width - headerColumnWidthDiff);\n        }\n      }\n\n      updateColumnCaches();\n    }\n\n    function applyColumnWidths() {\n      var x = 0, w, rule;\n      for (var i = 0; i < columns.length; i++) {\n        w = columns[i].width;\n\n        rule = getColumnCssRules(i);\n        rule.left.style.left = x + \"px\";\n        rule.right.style.right = (canvasWidth - x - w) + \"px\";\n\n        x += columns[i].width;\n      }\n    }\n\n    function setSortColumn(columnId, ascending) {\n      setSortColumns([{ columnId: columnId, sortAsc: ascending}]);\n    }\n\n    function setSortColumns(cols) {\n      sortColumns = cols;\n\n      var headerColumnEls = $headers.children();\n      headerColumnEls\n          .removeClass(\"slick-header-column-sorted\")\n          .find(\".slick-sort-indicator\")\n              .removeClass(\"slick-sort-indicator-asc slick-sort-indicator-desc\");\n\n      $.each(sortColumns, function(i, col) {\n        if (col.sortAsc == null) {\n          col.sortAsc = true;\n        }\n        var columnIndex = getColumnIndex(col.columnId);\n        if (columnIndex != null) {\n          headerColumnEls.eq(columnIndex)\n              .addClass(\"slick-header-column-sorted\")\n              .find(\".slick-sort-indicator\")\n                  .addClass(col.sortAsc ? \"slick-sort-indicator-asc\" : \"slick-sort-indicator-desc\");\n        }\n      });\n    }\n\n    function getSortColumns() {\n      return sortColumns;\n    }\n\n    function handleSelectedRangesChanged(e, ranges) {\n      selectedRows = [];\n      var hash = {};\n      for (var i = 0; i < ranges.length; i++) {\n        for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {\n          if (!hash[j]) {  // prevent duplicates\n            selectedRows.push(j);\n            hash[j] = {};\n          }\n          for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++) {\n            if (canCellBeSelected(j, k)) {\n              hash[j][columns[k].id] = options.selectedCellCssClass;\n            }\n          }\n        }\n      }\n\n      setCellCssStyles(options.selectedCellCssClass, hash);\n\n      trigger(self.onSelectedRowsChanged, {rows: getSelectedRows()}, e);\n    }\n\n    function getColumns() {\n      return columns;\n    }\n\n    function updateColumnCaches() {\n      // Pre-calculate cell boundaries.\n      columnPosLeft = [];\n      columnPosRight = [];\n      var x = 0;\n      for (var i = 0, ii = columns.length; i < ii; i++) {\n        columnPosLeft[i] = x;\n        columnPosRight[i] = x + columns[i].width;\n        x += columns[i].width;\n      }\n    }\n\n    function setColumns(columnDefinitions) {\n      columns = columnDefinitions;\n\n      columnsById = {};\n      for (var i = 0; i < columns.length; i++) {\n        var m = columns[i] = $.extend({}, columnDefaults, columns[i]);\n        columnsById[m.id] = i;\n        if (m.minWidth && m.width < m.minWidth) {\n          m.width = m.minWidth;\n        }\n        if (m.maxWidth && m.width > m.maxWidth) {\n          m.width = m.maxWidth;\n        }\n      }\n\n      updateColumnCaches();\n\n      if (initialized) {\n        invalidateAllRows();\n        createColumnHeaders();\n        removeCssRules();\n        createCssRules();\n        resizeCanvas();\n        applyColumnWidths();\n        handleScroll();\n      }\n    }\n\n    function getOptions() {\n      return options;\n    }\n\n    function setOptions(args) {\n      if (!getEditorLock().commitCurrentEdit()) {\n        return;\n      }\n\n      makeActiveCellNormal();\n\n      if (options.enableAddRow !== args.enableAddRow) {\n        invalidateRow(getDataLength());\n      }\n\n      options = $.extend(options, args);\n      validateAndEnforceOptions();\n\n      $viewport.css(\"overflow-y\", options.autoHeight ? \"hidden\" : \"auto\");\n      render();\n    }\n\n    function validateAndEnforceOptions() {\n      if (options.autoHeight) {\n        options.leaveSpaceForNewRows = false;\n      }\n    }\n\n    function setData(newData, scrollToTop) {\n      data = newData;\n      invalidateAllRows();\n      updateRowCount();\n      if (scrollToTop) {\n        scrollTo(0);\n      }\n    }\n\n    function getData() {\n      return data;\n    }\n\n    function getDataLength() {\n      if (data.getLength) {\n        return data.getLength();\n      } else {\n        return data.length;\n      }\n    }\n\n    function getDataItem(i) {\n      if (data.getItem) {\n        return data.getItem(i);\n      } else {\n        return data[i];\n      }\n    }\n\n    function getTopPanel() {\n      return $topPanel[0];\n    }\n\n    function setTopPanelVisibility(visible) {\n      if (options.showTopPanel != visible) {\n        options.showTopPanel = visible;\n        if (visible) {\n          $topPanelScroller.slideDown(\"fast\", resizeCanvas);\n        } else {\n          $topPanelScroller.slideUp(\"fast\", resizeCanvas);\n        }\n      }\n    }\n\n    function setHeaderRowVisibility(visible) {\n      if (options.showHeaderRow != visible) {\n        options.showHeaderRow = visible;\n        if (visible) {\n          $headerRowScroller.slideDown(\"fast\", resizeCanvas);\n        } else {\n          $headerRowScroller.slideUp(\"fast\", resizeCanvas);\n        }\n      }\n    }\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Rendering / Scrolling\n\n    function scrollTo(y) {\n      y = Math.max(y, 0);\n      y = Math.min(y, th - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0));\n\n      var oldOffset = offset;\n\n      page = Math.min(n - 1, Math.floor(y / ph));\n      offset = Math.round(page * cj);\n      var newScrollTop = y - offset;\n\n      if (offset != oldOffset) {\n        var range = getVisibleRange(newScrollTop);\n        cleanupRows(range);\n        updateRowPositions();\n      }\n\n      if (prevScrollTop != newScrollTop) {\n        vScrollDir = (prevScrollTop + oldOffset < newScrollTop + offset) ? 1 : -1;\n        $viewport[0].scrollTop = (lastRenderedScrollTop = scrollTop = prevScrollTop = newScrollTop);\n\n        trigger(self.onViewportChanged, {});\n      }\n    }\n\n    function defaultFormatter(row, cell, value, columnDef, dataContext) {\n      if (value == null) {\n        return \"\";\n      } else {\n        return value.toString().replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");\n      }\n    }\n\n    function getFormatter(row, column) {\n      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n\n      // look up by id, then index\n      var columnOverrides = rowMetadata &&\n          rowMetadata.columns &&\n          (rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);\n\n      return (columnOverrides && columnOverrides.formatter) ||\n          (rowMetadata && rowMetadata.formatter) ||\n          column.formatter ||\n          (options.formatterFactory && options.formatterFactory.getFormatter(column)) ||\n          options.defaultFormatter;\n    }\n\n    function getEditor(row, cell) {\n      var column = columns[cell];\n      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n      var columnMetadata = rowMetadata && rowMetadata.columns;\n\n      if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined) {\n        return columnMetadata[column.id].editor;\n      }\n      if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined) {\n        return columnMetadata[cell].editor;\n      }\n\n      return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));\n    }\n\n    function getDataItemValueForColumn(item, columnDef) {\n      if (options.dataItemColumnValueExtractor) {\n        return options.dataItemColumnValueExtractor(item, columnDef);\n      }\n      return item[columnDef.field];\n    }\n\n    function appendRowHtml(stringArray, row, range) {\n      var d = getDataItem(row);\n      var dataLoading = row < getDataLength() && !d;\n      var rowCss = \"slick-row\" +\n          (dataLoading ? \" loading\" : \"\") +\n          (row === activeRow ? \" active\" : \"\") +\n          (row % 2 == 1 ? \" odd\" : \" even\");\n\n      var metadata = data.getItemMetadata && data.getItemMetadata(row);\n\n      if (metadata && metadata.cssClasses) {\n        rowCss += \" \" + metadata.cssClasses;\n      }\n\n      stringArray.push(\"<div class='ui-widget-content \" + rowCss + \"' style='top:\" + (options.rowHeight * row - offset) + \"px'>\");\n\n      var colspan, m;\n      for (var i = 0, ii = columns.length; i < ii; i++) {\n        m = columns[i];\n        colspan = 1;\n        if (metadata && metadata.columns) {\n          var columnData = metadata.columns[m.id] || metadata.columns[i];\n          colspan = (columnData && columnData.colspan) || 1;\n          if (colspan === \"*\") {\n            colspan = ii - i;\n          }\n        }\n\n        // Do not render cells outside of the viewport.\n        if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {\n          if (columnPosLeft[i] > range.rightPx) {\n            // All columns to the right are outside the range.\n            break;\n          }\n\n          appendCellHtml(stringArray, row, i, colspan);\n        }\n\n        if (colspan > 1) {\n          i += (colspan - 1);\n        }\n      }\n\n      stringArray.push(\"</div>\");\n    }\n\n    function appendCellHtml(stringArray, row, cell, colspan) {\n      var m = columns[cell];\n      var d = getDataItem(row);\n      var cellCss = \"slick-cell l\" + cell + \" r\" + Math.min(columns.length - 1, cell + colspan - 1) +\n          (m.cssClass ? \" \" + m.cssClass : \"\");\n      if (row === activeRow && cell === activeCell) {\n        cellCss += (\" active\");\n      }\n\n      // TODO:  merge them together in the setter\n      for (var key in cellCssClasses) {\n        if (cellCssClasses[key][row] && cellCssClasses[key][row][m.id]) {\n          cellCss += (\" \" + cellCssClasses[key][row][m.id]);\n        }\n      }\n\n      stringArray.push(\"<div class='\" + cellCss + \"'>\");\n\n      // if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)\n      if (d) {\n        var value = getDataItemValueForColumn(d, m);\n        stringArray.push(getFormatter(row, m)(row, cell, value, m, d));\n      }\n\n      stringArray.push(\"</div>\");\n\n      rowsCache[row].cellRenderQueue.push(cell);\n      rowsCache[row].cellColSpans[cell] = colspan;\n    }\n\n\n    function cleanupRows(rangeToKeep) {\n      for (var i in rowsCache) {\n        if (((i = parseInt(i, 10)) !== activeRow) && (i < rangeToKeep.top || i > rangeToKeep.bottom)) {\n          removeRowFromCache(i);\n        }\n      }\n    }\n\n    function invalidate() {\n      updateRowCount();\n      invalidateAllRows();\n      render();\n    }\n\n    function invalidateAllRows() {\n      if (currentEditor) {\n        makeActiveCellNormal();\n      }\n      for (var row in rowsCache) {\n        removeRowFromCache(row);\n      }\n    }\n\n    function removeRowFromCache(row) {\n      var cacheEntry = rowsCache[row];\n      if (!cacheEntry) {\n        return;\n      }\n      $canvas[0].removeChild(cacheEntry.rowNode);\n      delete rowsCache[row];\n      delete postProcessedRows[row];\n      renderedRows--;\n      counter_rows_removed++;\n    }\n\n    function invalidateRows(rows) {\n      var i, rl;\n      if (!rows || !rows.length) {\n        return;\n      }\n      vScrollDir = 0;\n      for (i = 0, rl = rows.length; i < rl; i++) {\n        if (currentEditor && activeRow === rows[i]) {\n          makeActiveCellNormal();\n        }\n        if (rowsCache[rows[i]]) {\n          removeRowFromCache(rows[i]);\n        }\n      }\n    }\n\n    function invalidateRow(row) {\n      invalidateRows([row]);\n    }\n\n    function updateCell(row, cell) {\n      var cellNode = getCellNode(row, cell);\n      if (!cellNode) {\n        return;\n      }\n\n      var m = columns[cell], d = getDataItem(row);\n      if (currentEditor && activeRow === row && activeCell === cell) {\n        currentEditor.loadValue(d);\n      } else {\n        cellNode.innerHTML = d ? getFormatter(row, m)(row, cell, getDataItemValueForColumn(d, m), m, d) : \"\";\n        invalidatePostProcessingResults(row);\n      }\n    }\n\n    function updateRow(row) {\n      var cacheEntry = rowsCache[row];\n      if (!cacheEntry) {\n        return;\n      }\n\n      ensureCellNodesInRowsCache(row);\n\n      for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {\n        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {\n          continue;\n        }\n\n        columnIdx = columnIdx | 0;\n        var m = columns[columnIdx],\n            d = getDataItem(row),\n            node = cacheEntry.cellNodesByColumnIdx[columnIdx];\n\n        if (row === activeRow && columnIdx === activeCell && currentEditor) {\n          currentEditor.loadValue(d);\n        } else if (d) {\n          node.innerHTML = getFormatter(row, m)(row, columnIdx, getDataItemValueForColumn(d, m), m, d);\n        } else {\n          node.innerHTML = \"\";\n        }\n      }\n\n      invalidatePostProcessingResults(row);\n    }\n\n    function getViewportHeight() {\n      return parseFloat($.css($container[0], \"height\", true)) -\n          parseFloat($.css($container[0], \"paddingTop\", true)) -\n          parseFloat($.css($container[0], \"paddingBottom\", true)) -\n          parseFloat($.css($headerScroller[0], \"height\")) - getVBoxDelta($headerScroller) -\n          (options.showTopPanel ? options.topPanelHeight + getVBoxDelta($topPanelScroller) : 0) -\n          (options.showHeaderRow ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0);\n    }\n\n    function resizeCanvas() {\n      if (!initialized) { return; }\n      if (options.autoHeight) {\n        viewportH = options.rowHeight * (getDataLength() + (options.enableAddRow ? 1 : 0));\n      } else {\n        viewportH = getViewportHeight();\n      }\n\n      numVisibleRows = Math.ceil(viewportH / options.rowHeight);\n      viewportW = parseFloat($.css($container[0], \"width\", true));\n      if (!options.autoHeight) {\n        $viewport.height(viewportH);\n      }\n\n      if (options.forceFitColumns) {\n        autosizeColumns();\n      }\n\n      updateRowCount();\n      handleScroll();\n      render();\n    }\n\n    function updateRowCount() {\n      if (!initialized) { return; }\n      numberOfRows = getDataLength() +\n          (options.enableAddRow ? 1 : 0) +\n          (options.leaveSpaceForNewRows ? numVisibleRows - 1 : 0);\n\n      var oldViewportHasVScroll = viewportHasVScroll;\n      // with autoHeight, we do not need to accommodate the vertical scroll bar\n      viewportHasVScroll = !options.autoHeight && (numberOfRows * options.rowHeight > viewportH);\n\n      // remove the rows that are now outside of the data range\n      // this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows\n      var l = options.enableAddRow ? getDataLength() : getDataLength() - 1;\n      for (var i in rowsCache) {\n        if (i >= l) {\n          removeRowFromCache(i);\n        }\n      }\n\n      if (activeCellNode && activeRow > l) {\n        resetActiveCell();\n      }\n\n      var oldH = h;\n      th = Math.max(options.rowHeight * numberOfRows, viewportH - scrollbarDimensions.height);\n      if (th < maxSupportedCssHeight) {\n        // just one page\n        h = ph = th;\n        n = 1;\n        cj = 0;\n      } else {\n        // break into pages\n        h = maxSupportedCssHeight;\n        ph = h / 100;\n        n = Math.floor(th / ph);\n        cj = (th - h) / (n - 1);\n      }\n\n      if (h !== oldH) {\n        $canvas.css(\"height\", h);\n        scrollTop = $viewport[0].scrollTop;\n      }\n\n      var oldScrollTopInRange = (scrollTop + offset <= th - viewportH);\n\n      if (th == 0 || scrollTop == 0) {\n        page = offset = 0;\n      } else if (oldScrollTopInRange) {\n        // maintain virtual position\n        scrollTo(scrollTop + offset);\n      } else {\n        // scroll to bottom\n        scrollTo(th - viewportH);\n      }\n\n      if (h != oldH && options.autoHeight) {\n        resizeCanvas();\n      }\n\n      if (options.forceFitColumns && oldViewportHasVScroll != viewportHasVScroll) {\n        autosizeColumns();\n      }\n      updateCanvasWidth(false);\n    }\n\n    function getVisibleRange(viewportTop, viewportLeft) {\n      if (viewportTop == null) {\n        viewportTop = scrollTop;\n      }\n      if (viewportLeft == null) {\n        viewportLeft = scrollLeft;\n      }\n\n      return {\n        top: Math.floor((viewportTop + offset) / options.rowHeight),\n        bottom: Math.ceil((viewportTop + offset + viewportH) / options.rowHeight),\n        leftPx: viewportLeft,\n        rightPx: viewportLeft + viewportW\n      };\n    }\n\n    function getRenderedRange(viewportTop, viewportLeft) {\n      var range = getVisibleRange(viewportTop, viewportLeft);\n      var buffer = Math.round(viewportH / options.rowHeight);\n      var minBuffer = 3;\n\n      if (vScrollDir == -1) {\n        range.top -= buffer;\n        range.bottom += minBuffer;\n      } else if (vScrollDir == 1) {\n        range.top -= minBuffer;\n        range.bottom += buffer;\n      } else {\n        range.top -= minBuffer;\n        range.bottom += minBuffer;\n      }\n\n      range.top = Math.max(0, range.top);\n      range.bottom = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, range.bottom);\n\n      range.leftPx -= viewportW;\n      range.rightPx += viewportW;\n\n      range.leftPx = Math.max(0, range.leftPx);\n      range.rightPx = Math.min(canvasWidth, range.rightPx);\n\n      return range;\n    }\n\n    function ensureCellNodesInRowsCache(row) {\n      var cacheEntry = rowsCache[row];\n      if (cacheEntry) {\n        if (cacheEntry.cellRenderQueue.length) {\n          var lastChild = cacheEntry.rowNode.lastChild;\n          while (cacheEntry.cellRenderQueue.length) {\n            var columnIdx = cacheEntry.cellRenderQueue.pop();\n            cacheEntry.cellNodesByColumnIdx[columnIdx] = lastChild;\n            lastChild = lastChild.previousSibling;\n          }\n        }\n      }\n    }\n\n    function cleanUpCells(range, row) {\n      var totalCellsRemoved = 0;\n      var cacheEntry = rowsCache[row];\n\n      // Remove cells outside the range.\n      var cellsToRemove = [];\n      for (var i in cacheEntry.cellNodesByColumnIdx) {\n        // I really hate it when people mess with Array.prototype.\n        if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)) {\n          continue;\n        }\n\n        // This is a string, so it needs to be cast back to a number.\n        i = i | 0;\n\n        var colspan = cacheEntry.cellColSpans[i];\n        if (columnPosLeft[i] > range.rightPx ||\n          columnPosRight[Math.min(columns.length - 1, i + colspan - 1)] < range.leftPx) {\n          if (!(row == activeRow && i == activeCell)) {\n            cellsToRemove.push(i);\n          }\n        }\n      }\n\n      var cellToRemove;\n      while ((cellToRemove = cellsToRemove.pop()) != null) {\n        cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);\n        delete cacheEntry.cellColSpans[cellToRemove];\n        delete cacheEntry.cellNodesByColumnIdx[cellToRemove];\n        if (postProcessedRows[row]) {\n          delete postProcessedRows[row][cellToRemove];\n        }\n        totalCellsRemoved++;\n      }\n    }\n\n    function cleanUpAndRenderCells(range) {\n      var cacheEntry;\n      var stringArray = [];\n      var processedRows = [];\n      var cellsAdded;\n      var totalCellsAdded = 0;\n      var colspan;\n\n      for (var row = range.top; row <= range.bottom; row++) {\n        cacheEntry = rowsCache[row];\n        if (!cacheEntry) {\n          continue;\n        }\n\n        // cellRenderQueue populated in renderRows() needs to be cleared first\n        ensureCellNodesInRowsCache(row);\n\n        cleanUpCells(range, row);\n\n        // Render missing cells.\n        cellsAdded = 0;\n\n        var metadata = data.getItemMetadata && data.getItemMetadata(row);\n        metadata = metadata && metadata.columns;\n\n        // TODO:  shorten this loop (index? heuristics? binary search?)\n        for (var i = 0, ii = columns.length; i < ii; i++) {\n          // Cells to the right are outside the range.\n          if (columnPosLeft[i] > range.rightPx) {\n            break;\n          }\n\n          // Already rendered.\n          if ((colspan = cacheEntry.cellColSpans[i]) != null) {\n            i += (colspan > 1 ? colspan - 1 : 0);\n            continue;\n          }\n\n          colspan = 1;\n          if (metadata) {\n            var columnData = metadata[columns[i].id] || metadata[i];\n            colspan = (columnData && columnData.colspan) || 1;\n            if (colspan === \"*\") {\n              colspan = ii - i;\n            }\n          }\n\n          if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {\n            appendCellHtml(stringArray, row, i, colspan);\n            cellsAdded++;\n          }\n\n          i += (colspan > 1 ? colspan - 1 : 0);\n        }\n\n        if (cellsAdded) {\n          totalCellsAdded += cellsAdded;\n          processedRows.push(row);\n        }\n      }\n\n      if (!stringArray.length) {\n        return;\n      }\n\n      var x = document.createElement(\"div\");\n      x.innerHTML = stringArray.join(\"\");\n\n      var processedRow;\n      var node;\n      while ((processedRow = processedRows.pop()) != null) {\n        cacheEntry = rowsCache[processedRow];\n        var columnIdx;\n        while ((columnIdx = cacheEntry.cellRenderQueue.pop()) != null) {\n          node = x.lastChild;\n          cacheEntry.rowNode.appendChild(node);\n          cacheEntry.cellNodesByColumnIdx[columnIdx] = node;\n        }\n      }\n    }\n\n    function renderRows(range) {\n      var parentNode = $canvas[0],\n          stringArray = [],\n          rows = [],\n          needToReselectCell = false;\n\n      for (var i = range.top; i <= range.bottom; i++) {\n        if (rowsCache[i]) {\n          continue;\n        }\n        renderedRows++;\n        rows.push(i);\n\n        // Create an entry right away so that appendRowHtml() can\n        // start populatating it.\n        rowsCache[i] = {\n          \"rowNode\": null,\n\n          // ColSpans of rendered cells (by column idx).\n          // Can also be used for checking whether a cell has been rendered.\n          \"cellColSpans\": [],\n\n          // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\n          \"cellNodesByColumnIdx\": [],\n\n          // Column indices of cell nodes that have been rendered, but not yet indexed in\n          // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\n          // end of the row.\n          \"cellRenderQueue\": []\n        };\n\n        appendRowHtml(stringArray, i, range);\n        if (activeCellNode && activeRow === i) {\n          needToReselectCell = true;\n        }\n        counter_rows_rendered++;\n      }\n\n      if (!rows.length) { return; }\n\n      var x = document.createElement(\"div\");\n      x.innerHTML = stringArray.join(\"\");\n\n      for (var i = 0, ii = rows.length; i < ii; i++) {\n        rowsCache[rows[i]].rowNode = parentNode.appendChild(x.firstChild);\n      }\n\n      if (needToReselectCell) {\n        activeCellNode = getCellNode(activeRow, activeCell);\n      }\n    }\n\n    function startPostProcessing() {\n      if (!options.enableAsyncPostRender) {\n        return;\n      }\n      clearTimeout(h_postrender);\n      h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n    }\n\n    function invalidatePostProcessingResults(row) {\n      delete postProcessedRows[row];\n      postProcessFromRow = Math.min(postProcessFromRow, row);\n      postProcessToRow = Math.max(postProcessToRow, row);\n      startPostProcessing();\n    }\n\n    function updateRowPositions() {\n      for (var row in rowsCache) {\n        rowsCache[row].rowNode.style.top = (row * options.rowHeight - offset) + \"px\";\n      }\n    }\n\n    function render() {\n      if (!initialized) { return; }\n      var visible = getVisibleRange();\n      var rendered = getRenderedRange();\n\n      // remove rows no longer in the viewport\n      cleanupRows(rendered);\n\n      // add new rows & missing cells in existing rows\n      if (lastRenderedScrollLeft != scrollLeft) {\n        cleanUpAndRenderCells(rendered);\n      }\n\n      // render missing rows\n      renderRows(rendered);\n\n      postProcessFromRow = visible.top;\n      postProcessToRow = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, visible.bottom);\n      startPostProcessing();\n\n      lastRenderedScrollTop = scrollTop;\n      lastRenderedScrollLeft = scrollLeft;\n      h_render = null;\n    }\n\n    function handleHeaderRowScroll() {\n      var scrollLeft = $headerRowScroller[0].scrollLeft;\n      if (scrollLeft != $viewport[0].scrollLeft) {\n        $viewport[0].scrollLeft = scrollLeft;\n      }\n    }\n\n    function handleScroll() {\n      scrollTop = $viewport[0].scrollTop;\n      scrollLeft = $viewport[0].scrollLeft;\n      var vScrollDist = Math.abs(scrollTop - prevScrollTop);\n      var hScrollDist = Math.abs(scrollLeft - prevScrollLeft);\n\n      if (hScrollDist) {\n        prevScrollLeft = scrollLeft;\n        $headerScroller[0].scrollLeft = scrollLeft;\n        $topPanelScroller[0].scrollLeft = scrollLeft;\n        $headerRowScroller[0].scrollLeft = scrollLeft;\n      }\n\n      if (vScrollDist) {\n        vScrollDir = prevScrollTop < scrollTop ? 1 : -1;\n        prevScrollTop = scrollTop;\n\n        // switch virtual pages if needed\n        if (vScrollDist < viewportH) {\n          scrollTo(scrollTop + offset);\n        } else {\n          var oldOffset = offset;\n          if (h == viewportH) {\n            page = 0;\n          } else {\n            page = Math.min(n - 1, Math.floor(scrollTop * ((th - viewportH) / (h - viewportH)) * (1 / ph)));\n          }\n          offset = Math.round(page * cj);\n          if (oldOffset != offset) {\n            invalidateAllRows();\n          }\n        }\n      }\n\n      if (hScrollDist || vScrollDist) {\n        if (h_render) {\n          clearTimeout(h_render);\n        }\n\n        if (Math.abs(lastRenderedScrollTop - scrollTop) > 20 ||\n            Math.abs(lastRenderedScrollLeft - scrollLeft) > 20) {\n          if (options.forceSyncScrolling || (\n              Math.abs(lastRenderedScrollTop - scrollTop) < viewportH &&\n              Math.abs(lastRenderedScrollLeft - scrollLeft) < viewportW)) {\n            render();\n          } else {\n            h_render = setTimeout(render, 50);\n          }\n\n          trigger(self.onViewportChanged, {});\n        }\n      }\n\n      trigger(self.onScroll, {scrollLeft: scrollLeft, scrollTop: scrollTop});\n    }\n\n    function asyncPostProcessRows() {\n      while (postProcessFromRow <= postProcessToRow) {\n        var row = (vScrollDir >= 0) ? postProcessFromRow++ : postProcessToRow--;\n        var cacheEntry = rowsCache[row];\n        if (!cacheEntry || row >= getDataLength()) {\n          continue;\n        }\n\n        if (!postProcessedRows[row]) {\n          postProcessedRows[row] = {};\n        }\n\n        ensureCellNodesInRowsCache(row);\n        for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {\n          if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {\n            continue;\n          }\n\n          columnIdx = columnIdx | 0;\n\n          var m = columns[columnIdx];\n          if (m.asyncPostRender && !postProcessedRows[row][columnIdx]) {\n            var node = cacheEntry.cellNodesByColumnIdx[columnIdx];\n            if (node) {\n              m.asyncPostRender(node, postProcessFromRow, getDataItem(row), m);\n            }\n            postProcessedRows[row][columnIdx] = true;\n          }\n        }\n\n        h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);\n        return;\n      }\n    }\n\n    function updateCellCssStylesOnRenderedRows(addedHash, removedHash) {\n      var node, columnId, addedRowHash, removedRowHash;\n      for (var row in rowsCache) {\n        removedRowHash = removedHash && removedHash[row];\n        addedRowHash = addedHash && addedHash[row];\n\n        if (removedRowHash) {\n          for (columnId in removedRowHash) {\n            if (!addedRowHash || removedRowHash[columnId] != addedRowHash[columnId]) {\n              node = getCellNode(row, getColumnIndex(columnId));\n              if (node) {\n                $(node).removeClass(removedRowHash[columnId]);\n              }\n            }\n          }\n        }\n\n        if (addedRowHash) {\n          for (columnId in addedRowHash) {\n            if (!removedRowHash || removedRowHash[columnId] != addedRowHash[columnId]) {\n              node = getCellNode(row, getColumnIndex(columnId));\n              if (node) {\n                $(node).addClass(addedRowHash[columnId]);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    function addCellCssStyles(key, hash) {\n      if (cellCssClasses[key]) {\n        throw \"addCellCssStyles: cell CSS hash with key '\" + key + \"' already exists.\";\n      }\n\n      cellCssClasses[key] = hash;\n      updateCellCssStylesOnRenderedRows(hash, null);\n\n      trigger(self.onCellCssStylesChanged, { \"key\": key, \"hash\": hash });\n    }\n\n    function removeCellCssStyles(key) {\n      if (!cellCssClasses[key]) {\n        return;\n      }\n\n      updateCellCssStylesOnRenderedRows(null, cellCssClasses[key]);\n      delete cellCssClasses[key];\n\n      trigger(self.onCellCssStylesChanged, { \"key\": key, \"hash\": null });\n    }\n\n    function setCellCssStyles(key, hash) {\n      var prevHash = cellCssClasses[key];\n\n      cellCssClasses[key] = hash;\n      updateCellCssStylesOnRenderedRows(hash, prevHash);\n\n      trigger(self.onCellCssStylesChanged, { \"key\": key, \"hash\": hash });\n    }\n\n    function getCellCssStyles(key) {\n      return cellCssClasses[key];\n    }\n\n    function flashCell(row, cell, speed) {\n      speed = speed || 100;\n      if (rowsCache[row]) {\n        var $cell = $(getCellNode(row, cell));\n\n        function toggleCellClass(times) {\n          if (!times) {\n            return;\n          }\n          setTimeout(function () {\n                $cell.queue(function () {\n                  $cell.toggleClass(options.cellFlashingCssClass).dequeue();\n                  toggleCellClass(times - 1);\n                });\n              },\n              speed);\n        }\n\n        toggleCellClass(4);\n      }\n    }\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Interactivity\n\n    function handleDragInit(e, dd) {\n      var cell = getCellFromEvent(e);\n      if (!cell || !cellExists(cell.row, cell.cell)) {\n        return false;\n      }\n\n      retval = trigger(self.onDragInit, dd, e);\n      if (e.isImmediatePropagationStopped()) {\n        return retval;\n      }\n\n      // if nobody claims to be handling drag'n'drop by stopping immediate propagation,\n      // cancel out of it\n      return false;\n    }\n\n    function handleDragStart(e, dd) {\n      var cell = getCellFromEvent(e);\n      if (!cell || !cellExists(cell.row, cell.cell)) {\n        return false;\n      }\n\n      var retval = trigger(self.onDragStart, dd, e);\n      if (e.isImmediatePropagationStopped()) {\n        return retval;\n      }\n\n      return false;\n    }\n\n    function handleDrag(e, dd) {\n      return trigger(self.onDrag, dd, e);\n    }\n\n    function handleDragEnd(e, dd) {\n      trigger(self.onDragEnd, dd, e);\n    }\n\n    function handleKeyDown(e) {\n      trigger(self.onKeyDown, {row: activeRow, cell: activeCell}, e);\n      var handled = e.isImmediatePropagationStopped();\n\n      if (!handled) {\n        if (!e.shiftKey && !e.altKey && !e.ctrlKey) {\n          if (e.which == 27) {\n            if (!getEditorLock().isActive()) {\n              return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)\n            }\n            cancelEditAndSetFocus();\n          } else if (e.which == 37) {\n            handled = navigateLeft();\n          } else if (e.which == 39) {\n            handled = navigateRight();\n          } else if (e.which == 38) {\n            handled = navigateUp();\n          } else if (e.which == 40) {\n            handled = navigateDown();\n          } else if (e.which == 9) {\n            handled = navigateNext();\n          } else if (e.which == 13) {\n            if (options.editable) {\n              if (currentEditor) {\n                // adding new row\n                if (activeRow === getDataLength()) {\n                  navigateDown();\n                } else {\n                  commitEditAndSetFocus();\n                }\n              } else {\n                if (getEditorLock().commitCurrentEdit()) {\n                  makeActiveCellEditable();\n                }\n              }\n            }\n            handled = true;\n          }\n        } else if (e.which == 9 && e.shiftKey && !e.ctrlKey && !e.altKey) {\n          handled = navigatePrev();\n        }\n      }\n\n      if (handled) {\n        // the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it\n        e.stopPropagation();\n        e.preventDefault();\n        try {\n          e.originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)\n        }\n        // ignore exceptions - setting the original event's keycode throws access denied exception for \"Ctrl\"\n        // (hitting control key only, nothing else), \"Shift\" (maybe others)\n        catch (error) {\n        }\n      }\n    }\n\n    function handleClick(e) {\n      if (!currentEditor) {\n        // if this click resulted in some cell child node getting focus,\n        // don't steal it back - keyboard events will still bubble up\n        if (e.target != document.activeElement) {\n          setFocus();\n        }\n      }\n\n      var cell = getCellFromEvent(e);\n      if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {\n        return;\n      }\n\n      trigger(self.onClick, {row: cell.row, cell: cell.cell}, e);\n      if (e.isImmediatePropagationStopped()) {\n        return;\n      }\n\n      if ((activeCell != cell.cell || activeRow != cell.row) && canCellBeActive(cell.row, cell.cell)) {\n        if (!getEditorLock().isActive() || getEditorLock().commitCurrentEdit()) {\n          scrollRowIntoView(cell.row, false);\n          setActiveCellInternal(getCellNode(cell.row, cell.cell), (cell.row === getDataLength()) || options.autoEdit);\n        }\n      }\n    }\n\n    function handleContextMenu(e) {\n      var $cell = $(e.target).closest(\".slick-cell\", $canvas);\n      if ($cell.length === 0) {\n        return;\n      }\n\n      // are we editing this cell?\n      if (activeCellNode === $cell[0] && currentEditor !== null) {\n        return;\n      }\n\n      trigger(self.onContextMenu, {}, e);\n    }\n\n    function handleDblClick(e) {\n      var cell = getCellFromEvent(e);\n      if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {\n        return;\n      }\n\n      trigger(self.onDblClick, {row: cell.row, cell: cell.cell}, e);\n      if (e.isImmediatePropagationStopped()) {\n        return;\n      }\n\n      if (options.editable) {\n        gotoCell(cell.row, cell.cell, true);\n      }\n    }\n\n    function handleHeaderMouseEnter(e) {\n      trigger(self.onHeaderMouseEnter, {\n        \"column\": $(this).data(\"column\")\n      }, e);\n    }\n\n    function handleHeaderMouseLeave(e) {\n      trigger(self.onHeaderMouseLeave, {\n        \"column\": $(this).data(\"column\")\n      }, e);\n    }\n\n    function handleHeaderContextMenu(e) {\n      var $header = $(e.target).closest(\".slick-header-column\", \".slick-header-columns\");\n      var column = $header && $header.data(\"column\");\n      trigger(self.onHeaderContextMenu, {column: column}, e);\n    }\n\n    function handleHeaderClick(e) {\n      var $header = $(e.target).closest(\".slick-header-column\", \".slick-header-columns\");\n      var column = $header && $header.data(\"column\");\n      if (column) {\n        trigger(self.onHeaderClick, {column: column}, e);\n      }\n    }\n\n    function handleMouseEnter(e) {\n      trigger(self.onMouseEnter, {}, e);\n    }\n\n    function handleMouseLeave(e) {\n      trigger(self.onMouseLeave, {}, e);\n    }\n\n    function cellExists(row, cell) {\n      return !(row < 0 || row >= getDataLength() || cell < 0 || cell >= columns.length);\n    }\n\n    function getCellFromPoint(x, y) {\n      var row = Math.floor((y + offset) / options.rowHeight);\n      var cell = 0;\n\n      var w = 0;\n      for (var i = 0; i < columns.length && w < x; i++) {\n        w += columns[i].width;\n        cell++;\n      }\n\n      if (cell < 0) {\n        cell = 0;\n      }\n\n      return {row: row, cell: cell - 1};\n    }\n\n    function getCellFromNode(cellNode) {\n      // read column number from .l<columnNumber> CSS class\n      var cls = /l\\d+/.exec(cellNode.className);\n      if (!cls) {\n        throw \"getCellFromNode: cannot get cell - \" + cellNode.className;\n      }\n      return parseInt(cls[0].substr(1, cls[0].length - 1), 10);\n    }\n\n    function getRowFromNode(rowNode) {\n      for (var row in rowsCache) {\n        if (rowsCache[row].rowNode === rowNode) {\n          return row | 0;\n        }\n      }\n\n      return null;\n    }\n\n    function getCellFromEvent(e) {\n      var $cell = $(e.target).closest(\".slick-cell\", $canvas);\n      if (!$cell.length) {\n        return null;\n      }\n\n      var row = getRowFromNode($cell[0].parentNode);\n      var cell = getCellFromNode($cell[0]);\n\n      if (row == null || cell == null) {\n        return null;\n      } else {\n        return {\n          \"row\": row,\n          \"cell\": cell\n        };\n      }\n    }\n\n    function getCellNodeBox(row, cell) {\n      if (!cellExists(row, cell)) {\n        return null;\n      }\n\n      var y1 = row * options.rowHeight - offset;\n      var y2 = y1 + options.rowHeight - 1;\n      var x1 = 0;\n      for (var i = 0; i < cell; i++) {\n        x1 += columns[i].width;\n      }\n      var x2 = x1 + columns[cell].width;\n\n      return {\n        top: y1,\n        left: x1,\n        bottom: y2,\n        right: x2\n      };\n    }\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Cell switching\n\n    function resetActiveCell() {\n      setActiveCellInternal(null, false);\n    }\n\n    function setFocus() {\n      $focusSink[0].focus();\n    }\n\n    function scrollCellIntoView(row, cell) {\n      var colspan = getColspan(row, cell);\n      var left = columnPosLeft[cell],\n        right = columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)],\n        scrollRight = scrollLeft + viewportW;\n\n      if (left < scrollLeft) {\n        $viewport.scrollLeft(left);\n        handleScroll();\n        render();\n      } else if (right > scrollRight) {\n        $viewport.scrollLeft(Math.min(left, right - $viewport[0].clientWidth));\n        handleScroll();\n        render();\n      }\n    }\n\n    function setActiveCellInternal(newCell, editMode) {\n      if (activeCellNode !== null) {\n        makeActiveCellNormal();\n        $(activeCellNode).removeClass(\"active\");\n        if (rowsCache[activeRow]) {\n          $(rowsCache[activeRow].rowNode).removeClass(\"active\");\n        }\n      }\n\n      var activeCellChanged = (activeCellNode !== newCell);\n      activeCellNode = newCell;\n\n      if (activeCellNode != null) {\n        activeRow = getRowFromNode(activeCellNode.parentNode);\n        activeCell = activePosX = getCellFromNode(activeCellNode);\n\n        $(activeCellNode).addClass(\"active\");\n        $(rowsCache[activeRow].rowNode).addClass(\"active\");\n\n        if (options.editable && editMode && isCellPotentiallyEditable(activeRow, activeCell)) {\n          clearTimeout(h_editorLoader);\n\n          if (options.asyncEditorLoading) {\n            h_editorLoader = setTimeout(function () {\n              makeActiveCellEditable();\n            }, options.asyncEditorLoadDelay);\n          } else {\n            makeActiveCellEditable();\n          }\n        }\n      } else {\n        activeRow = activeCell = null;\n      }\n\n      if (activeCellChanged) {\n        trigger(self.onActiveCellChanged, getActiveCell());\n      }\n    }\n\n    function clearTextSelection() {\n      if (document.selection && document.selection.empty) {\n        document.selection.empty();\n      } else if (window.getSelection) {\n        var sel = window.getSelection();\n        if (sel && sel.removeAllRanges) {\n          sel.removeAllRanges();\n        }\n      }\n    }\n\n    function isCellPotentiallyEditable(row, cell) {\n      // is the data for this row loaded?\n      if (row < getDataLength() && !getDataItem(row)) {\n        return false;\n      }\n\n      // are we in the Add New row?  can we create new from this cell?\n      if (columns[cell].cannotTriggerInsert && row >= getDataLength()) {\n        return false;\n      }\n\n      // does this cell have an editor?\n      if (!getEditor(row, cell)) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function makeActiveCellNormal() {\n      if (!currentEditor) {\n        return;\n      }\n      trigger(self.onBeforeCellEditorDestroy, {editor: currentEditor});\n      currentEditor.destroy();\n      currentEditor = null;\n\n      if (activeCellNode) {\n        var d = getDataItem(activeRow);\n        $(activeCellNode).removeClass(\"editable invalid\");\n        if (d) {\n          var column = columns[activeCell];\n          var formatter = getFormatter(activeRow, column);\n          activeCellNode.innerHTML = formatter(activeRow, activeCell, getDataItemValueForColumn(d, column), column, getDataItem(activeRow));\n          invalidatePostProcessingResults(activeRow);\n        }\n      }\n\n      // if there previously was text selected on a page (such as selected text in the edit cell just removed),\n      // IE can't set focus to anything else correctly\n      if ($.browser.msie) {\n        clearTextSelection();\n      }\n\n      getEditorLock().deactivate(editController);\n    }\n\n    function makeActiveCellEditable(editor) {\n      if (!activeCellNode) {\n        return;\n      }\n      if (!options.editable) {\n        throw \"Grid : makeActiveCellEditable : should never get called when options.editable is false\";\n      }\n\n      // cancel pending async call if there is one\n      clearTimeout(h_editorLoader);\n\n      if (!isCellPotentiallyEditable(activeRow, activeCell)) {\n        return;\n      }\n\n      var columnDef = columns[activeCell];\n      var item = getDataItem(activeRow);\n\n      if (trigger(self.onBeforeEditCell, {row: activeRow, cell: activeCell, item: item, column: columnDef}) === false) {\n        setFocus();\n        return;\n      }\n\n      getEditorLock().activate(editController);\n      $(activeCellNode).addClass(\"editable\");\n\n      // don't clear the cell if a custom editor is passed through\n      if (!editor) {\n        activeCellNode.innerHTML = \"\";\n      }\n\n      currentEditor = new (editor || getEditor(activeRow, activeCell))({\n        grid: self,\n        gridPosition: absBox($container[0]),\n        position: absBox(activeCellNode),\n        container: activeCellNode,\n        column: columnDef,\n        item: item || {},\n        commitChanges: commitEditAndSetFocus,\n        cancelChanges: cancelEditAndSetFocus\n      });\n\n      if (item) {\n        currentEditor.loadValue(item);\n      }\n\n      serializedEditorValue = currentEditor.serializeValue();\n\n      if (currentEditor.position) {\n        handleActiveCellPositionChange();\n      }\n    }\n\n    function commitEditAndSetFocus() {\n      // if the commit fails, it would do so due to a validation error\n      // if so, do not steal the focus from the editor\n      if (getEditorLock().commitCurrentEdit()) {\n        setFocus();\n        if (options.autoEdit) {\n          navigateDown();\n        }\n      }\n    }\n\n    function cancelEditAndSetFocus() {\n      if (getEditorLock().cancelCurrentEdit()) {\n        setFocus();\n      }\n    }\n\n    function absBox(elem) {\n      var box = {\n        top: elem.offsetTop,\n        left: elem.offsetLeft,\n        bottom: 0,\n        right: 0,\n        width: $(elem).outerWidth(),\n        height: $(elem).outerHeight(),\n        visible: true};\n      box.bottom = box.top + box.height;\n      box.right = box.left + box.width;\n\n      // walk up the tree\n      var offsetParent = elem.offsetParent;\n      while ((elem = elem.parentNode) != document.body) {\n        if (box.visible && elem.scrollHeight != elem.offsetHeight && $(elem).css(\"overflowY\") != \"visible\") {\n          box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;\n        }\n\n        if (box.visible && elem.scrollWidth != elem.offsetWidth && $(elem).css(\"overflowX\") != \"visible\") {\n          box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;\n        }\n\n        box.left -= elem.scrollLeft;\n        box.top -= elem.scrollTop;\n\n        if (elem === offsetParent) {\n          box.left += elem.offsetLeft;\n          box.top += elem.offsetTop;\n          offsetParent = elem.offsetParent;\n        }\n\n        box.bottom = box.top + box.height;\n        box.right = box.left + box.width;\n      }\n\n      return box;\n    }\n\n    function getActiveCellPosition() {\n      return absBox(activeCellNode);\n    }\n\n    function getGridPosition() {\n      return absBox($container[0])\n    }\n\n    function handleActiveCellPositionChange() {\n      if (!activeCellNode) {\n        return;\n      }\n\n      trigger(self.onActiveCellPositionChanged, {});\n\n      if (currentEditor) {\n        var cellBox = getActiveCellPosition();\n        if (currentEditor.show && currentEditor.hide) {\n          if (!cellBox.visible) {\n            currentEditor.hide();\n          } else {\n            currentEditor.show();\n          }\n        }\n\n        if (currentEditor.position) {\n          currentEditor.position(cellBox);\n        }\n      }\n    }\n\n    function getCellEditor() {\n      return currentEditor;\n    }\n\n    function getActiveCell() {\n      if (!activeCellNode) {\n        return null;\n      } else {\n        return {row: activeRow, cell: activeCell};\n      }\n    }\n\n    function getActiveCellNode() {\n      return activeCellNode;\n    }\n\n    function scrollRowIntoView(row, doPaging) {\n      var rowAtTop = row * options.rowHeight;\n      var rowAtBottom = (row + 1) * options.rowHeight - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0);\n\n      // need to page down?\n      if ((row + 1) * options.rowHeight > scrollTop + viewportH + offset) {\n        scrollTo(doPaging ? rowAtTop : rowAtBottom);\n        render();\n      }\n      // or page up?\n      else if (row * options.rowHeight < scrollTop + offset) {\n        scrollTo(doPaging ? rowAtBottom : rowAtTop);\n        render();\n      }\n    }\n\n    function scrollRowToTop(row) {\n      scrollTo(row * options.rowHeight);\n      render();\n    }\n\n    function getColspan(row, cell) {\n      var metadata = data.getItemMetadata && data.getItemMetadata(row);\n      if (!metadata || !metadata.columns) {\n        return 1;\n      }\n\n      var columnData = metadata.columns[columns[cell].id] || metadata.columns[cell];\n      var colspan = (columnData && columnData.colspan);\n      if (colspan === \"*\") {\n        colspan = columns.length - cell;\n      } else {\n        colspan = colspan || 1;\n      }\n\n      return colspan;\n    }\n\n    function findFirstFocusableCell(row) {\n      var cell = 0;\n      while (cell < columns.length) {\n        if (canCellBeActive(row, cell)) {\n          return cell;\n        }\n        cell += getColspan(row, cell);\n      }\n      return null;\n    }\n\n    function findLastFocusableCell(row) {\n      var cell = 0;\n      var lastFocusableCell = null;\n      while (cell < columns.length) {\n        if (canCellBeActive(row, cell)) {\n          lastFocusableCell = cell;\n        }\n        cell += getColspan(row, cell);\n      }\n      return lastFocusableCell;\n    }\n\n    function gotoRight(row, cell, posX) {\n      if (cell >= columns.length) {\n        return null;\n      }\n\n      do {\n        cell += getColspan(row, cell);\n      }\n      while (cell < columns.length && !canCellBeActive(row, cell));\n\n      if (cell < columns.length) {\n        return {\n          \"row\": row,\n          \"cell\": cell,\n          \"posX\": cell\n        };\n      }\n      return null;\n    }\n\n    function gotoLeft(row, cell, posX) {\n      if (cell <= 0) {\n        return null;\n      }\n\n      var firstFocusableCell = findFirstFocusableCell(row);\n      if (firstFocusableCell === null || firstFocusableCell >= cell) {\n        return null;\n      }\n\n      var prev = {\n        \"row\": row,\n        \"cell\": firstFocusableCell,\n        \"posX\": firstFocusableCell\n      };\n      var pos;\n      while (true) {\n        pos = gotoRight(prev.row, prev.cell, prev.posX);\n        if (!pos) {\n          return null;\n        }\n        if (pos.cell >= cell) {\n          return prev;\n        }\n        prev = pos;\n      }\n    }\n\n    function gotoDown(row, cell, posX) {\n      var prevCell;\n      while (true) {\n        if (++row >= getDataLength() + (options.enableAddRow ? 1 : 0)) {\n          return null;\n        }\n\n        prevCell = cell = 0;\n        while (cell <= posX) {\n          prevCell = cell;\n          cell += getColspan(row, cell);\n        }\n\n        if (canCellBeActive(row, prevCell)) {\n          return {\n            \"row\": row,\n            \"cell\": prevCell,\n            \"posX\": posX\n          };\n        }\n      }\n    }\n\n    function gotoUp(row, cell, posX) {\n      var prevCell;\n      while (true) {\n        if (--row < 0) {\n          return null;\n        }\n\n        prevCell = cell = 0;\n        while (cell <= posX) {\n          prevCell = cell;\n          cell += getColspan(row, cell);\n        }\n\n        if (canCellBeActive(row, prevCell)) {\n          return {\n            \"row\": row,\n            \"cell\": prevCell,\n            \"posX\": posX\n          };\n        }\n      }\n    }\n\n    function gotoNext(row, cell, posX) {\n      if (row == null && cell == null) {\n        row = cell = posX = 0;\n        if (canCellBeActive(row, cell)) {\n          return {\n            \"row\": row,\n            \"cell\": cell,\n            \"posX\": cell\n          };\n        }\n      }\n\n      var pos = gotoRight(row, cell, posX);\n      if (pos) {\n        return pos;\n      }\n\n      var firstFocusableCell = null;\n      while (++row < getDataLength() + (options.enableAddRow ? 1 : 0)) {\n        firstFocusableCell = findFirstFocusableCell(row);\n        if (firstFocusableCell !== null) {\n          return {\n            \"row\": row,\n            \"cell\": firstFocusableCell,\n            \"posX\": firstFocusableCell\n          };\n        }\n      }\n      return null;\n    }\n\n    function gotoPrev(row, cell, posX) {\n      if (row == null && cell == null) {\n        row = getDataLength() + (options.enableAddRow ? 1 : 0) - 1;\n        cell = posX = columns.length - 1;\n        if (canCellBeActive(row, cell)) {\n          return {\n            \"row\": row,\n            \"cell\": cell,\n            \"posX\": cell\n          };\n        }\n      }\n\n      var pos;\n      var lastSelectableCell;\n      while (!pos) {\n        pos = gotoLeft(row, cell, posX);\n        if (pos) {\n          break;\n        }\n        if (--row < 0) {\n          return null;\n        }\n\n        cell = 0;\n        lastSelectableCell = findLastFocusableCell(row);\n        if (lastSelectableCell !== null) {\n          pos = {\n            \"row\": row,\n            \"cell\": lastSelectableCell,\n            \"posX\": lastSelectableCell\n          };\n        }\n      }\n      return pos;\n    }\n\n    function navigateRight() {\n      return navigate(\"right\");\n    }\n\n    function navigateLeft() {\n      return navigate(\"left\");\n    }\n\n    function navigateDown() {\n      return navigate(\"down\");\n    }\n\n    function navigateUp() {\n      return navigate(\"up\");\n    }\n\n    function navigateNext() {\n      return navigate(\"next\");\n    }\n\n    function navigatePrev() {\n      return navigate(\"prev\");\n    }\n\n    /**\n     * @param {string} dir Navigation direction.\n     * @return {boolean} Whether navigation resulted in a change of active cell.\n     */\n    function navigate(dir) {\n      if (!options.enableCellNavigation) {\n        return false;\n      }\n\n      if (!activeCellNode && dir != \"prev\" && dir != \"next\") {\n        return false;\n      }\n\n      if (!getEditorLock().commitCurrentEdit()) {\n        return true;\n      }\n      setFocus();\n\n      var stepFunctions = {\n        \"up\": gotoUp,\n        \"down\": gotoDown,\n        \"left\": gotoLeft,\n        \"right\": gotoRight,\n        \"prev\": gotoPrev,\n        \"next\": gotoNext\n      };\n      var stepFn = stepFunctions[dir];\n      var pos = stepFn(activeRow, activeCell, activePosX);\n      if (pos) {\n        var isAddNewRow = (pos.row == getDataLength());\n        scrollRowIntoView(pos.row, !isAddNewRow);\n        scrollCellIntoView(pos.row, pos.cell);\n        setActiveCellInternal(getCellNode(pos.row, pos.cell), isAddNewRow || options.autoEdit);\n        activePosX = pos.posX;\n        return true;\n      } else {\n        setActiveCellInternal(getCellNode(activeRow, activeCell), (activeRow == getDataLength()) || options.autoEdit);\n        return false;\n      }\n    }\n\n    function getCellNode(row, cell) {\n      if (rowsCache[row]) {\n        ensureCellNodesInRowsCache(row);\n        return rowsCache[row].cellNodesByColumnIdx[cell];\n      }\n      return null;\n    }\n\n    function setActiveCell(row, cell) {\n      if (!initialized) { return; }\n      if (row > getDataLength() || row < 0 || cell >= columns.length || cell < 0) {\n        return;\n      }\n\n      if (!options.enableCellNavigation) {\n        return;\n      }\n\n      scrollRowIntoView(row, false);\n      scrollCellIntoView(row, cell);\n      setActiveCellInternal(getCellNode(row, cell), false);\n    }\n\n    function canCellBeActive(row, cell) {\n      if (!options.enableCellNavigation || row >= getDataLength() + (options.enableAddRow ? 1 : 0) ||\n          row < 0 || cell >= columns.length || cell < 0) {\n        return false;\n      }\n\n      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n      if (rowMetadata && typeof rowMetadata.focusable === \"boolean\") {\n        return rowMetadata.focusable;\n      }\n\n      var columnMetadata = rowMetadata && rowMetadata.columns;\n      if (columnMetadata && columnMetadata[columns[cell].id] && typeof columnMetadata[columns[cell].id].focusable === \"boolean\") {\n        return columnMetadata[columns[cell].id].focusable;\n      }\n      if (columnMetadata && columnMetadata[cell] && typeof columnMetadata[cell].focusable === \"boolean\") {\n        return columnMetadata[cell].focusable;\n      }\n\n      if (typeof columns[cell].focusable === \"boolean\") {\n        return columns[cell].focusable;\n      }\n\n      return true;\n    }\n\n    function canCellBeSelected(row, cell) {\n      if (row >= getDataLength() || row < 0 || cell >= columns.length || cell < 0) {\n        return false;\n      }\n\n      var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);\n      if (rowMetadata && typeof rowMetadata.selectable === \"boolean\") {\n        return rowMetadata.selectable;\n      }\n\n      var columnMetadata = rowMetadata && rowMetadata.columns && (rowMetadata.columns[columns[cell].id] || rowMetadata.columns[cell]);\n      if (columnMetadata && typeof columnMetadata.selectable === \"boolean\") {\n        return columnMetadata.selectable;\n      }\n\n      if (typeof columns[cell].selectable === \"boolean\") {\n        return columns[cell].selectable;\n      }\n\n      return true;\n    }\n\n    function gotoCell(row, cell, forceEdit) {\n      if (!initialized) { return; }\n      if (!canCellBeActive(row, cell)) {\n        return;\n      }\n\n      if (!getEditorLock().commitCurrentEdit()) {\n        return;\n      }\n\n      scrollRowIntoView(row, false);\n      scrollCellIntoView(row, cell);\n\n      var newCell = getCellNode(row, cell);\n\n      // if selecting the 'add new' row, start editing right away\n      setActiveCellInternal(newCell, forceEdit || (row === getDataLength()) || options.autoEdit);\n\n      // if no editor was created, set the focus back on the grid\n      if (!currentEditor) {\n        setFocus();\n      }\n    }\n\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // IEditor implementation for the editor lock\n\n    function commitCurrentEdit() {\n      var item = getDataItem(activeRow);\n      var column = columns[activeCell];\n\n      if (currentEditor) {\n        if (currentEditor.isValueChanged()) {\n          var validationResults = currentEditor.validate();\n\n          if (validationResults.valid) {\n            if (activeRow < getDataLength()) {\n              var editCommand = {\n                row: activeRow,\n                cell: activeCell,\n                editor: currentEditor,\n                serializedValue: currentEditor.serializeValue(),\n                prevSerializedValue: serializedEditorValue,\n                execute: function () {\n                  this.editor.applyValue(item, this.serializedValue);\n                  updateRow(this.row);\n                },\n                undo: function () {\n                  this.editor.applyValue(item, this.prevSerializedValue);\n                  updateRow(this.row);\n                }\n              };\n\n              if (options.editCommandHandler) {\n                makeActiveCellNormal();\n                options.editCommandHandler(item, column, editCommand);\n              } else {\n                editCommand.execute();\n                makeActiveCellNormal();\n              }\n\n              trigger(self.onCellChange, {\n                row: activeRow,\n                cell: activeCell,\n                item: item\n              });\n            } else {\n              var newItem = {};\n              currentEditor.applyValue(newItem, currentEditor.serializeValue());\n              makeActiveCellNormal();\n              trigger(self.onAddNewRow, {item: newItem, column: column});\n            }\n\n            // check whether the lock has been re-acquired by event handlers\n            return !getEditorLock().isActive();\n          } else {\n            // TODO: remove and put in onValidationError handlers in examples\n            $(activeCellNode).addClass(\"invalid\");\n            $(activeCellNode).stop(true, true).effect(\"highlight\", {color: \"red\"}, 300);\n\n            trigger(self.onValidationError, {\n              editor: currentEditor,\n              cellNode: activeCellNode,\n              validationResults: validationResults,\n              row: activeRow,\n              cell: activeCell,\n              column: column\n            });\n\n            currentEditor.focus();\n            return false;\n          }\n        }\n\n        makeActiveCellNormal();\n      }\n      return true;\n    }\n\n    function cancelCurrentEdit() {\n      makeActiveCellNormal();\n      return true;\n    }\n\n    function rowsToRanges(rows) {\n      var ranges = [];\n      var lastCell = columns.length - 1;\n      for (var i = 0; i < rows.length; i++) {\n        ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));\n      }\n      return ranges;\n    }\n\n    function getSelectedRows() {\n      if (!selectionModel) {\n        throw \"Selection model is not set\";\n      }\n      return selectedRows;\n    }\n\n    function setSelectedRows(rows) {\n      if (!selectionModel) {\n        throw \"Selection model is not set\";\n      }\n      selectionModel.setSelectedRanges(rowsToRanges(rows));\n    }\n\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Debug\n\n    this.debug = function () {\n      var s = \"\";\n\n      s += (\"\\n\" + \"counter_rows_rendered:  \" + counter_rows_rendered);\n      s += (\"\\n\" + \"counter_rows_removed:  \" + counter_rows_removed);\n      s += (\"\\n\" + \"renderedRows:  \" + renderedRows);\n      s += (\"\\n\" + \"numVisibleRows:  \" + numVisibleRows);\n      s += (\"\\n\" + \"maxSupportedCssHeight:  \" + maxSupportedCssHeight);\n      s += (\"\\n\" + \"n(umber of pages):  \" + n);\n      s += (\"\\n\" + \"(current) page:  \" + page);\n      s += (\"\\n\" + \"page height (ph):  \" + ph);\n      s += (\"\\n\" + \"vScrollDir:  \" + vScrollDir);\n\n      alert(s);\n    };\n\n    // a debug helper to be able to access private members\n    this.eval = function (expr) {\n      return eval(expr);\n    };\n\n    //////////////////////////////////////////////////////////////////////////////////////////////\n    // Public API\n\n    $.extend(this, {\n      \"slickGridVersion\": \"2.1\",\n\n      // Events\n      \"onScroll\": new Slick.Event(),\n      \"onSort\": new Slick.Event(),\n      \"onHeaderMouseEnter\": new Slick.Event(),\n      \"onHeaderMouseLeave\": new Slick.Event(),\n      \"onHeaderContextMenu\": new Slick.Event(),\n      \"onHeaderClick\": new Slick.Event(),\n      \"onHeaderCellRendered\": new Slick.Event(),\n      \"onBeforeHeaderCellDestroy\": new Slick.Event(),\n      \"onHeaderRowCellRendered\": new Slick.Event(),\n      \"onBeforeHeaderRowCellDestroy\": new Slick.Event(),\n      \"onMouseEnter\": new Slick.Event(),\n      \"onMouseLeave\": new Slick.Event(),\n      \"onClick\": new Slick.Event(),\n      \"onDblClick\": new Slick.Event(),\n      \"onContextMenu\": new Slick.Event(),\n      \"onKeyDown\": new Slick.Event(),\n      \"onAddNewRow\": new Slick.Event(),\n      \"onValidationError\": new Slick.Event(),\n      \"onViewportChanged\": new Slick.Event(),\n      \"onColumnsReordered\": new Slick.Event(),\n      \"onColumnsResized\": new Slick.Event(),\n      \"onCellChange\": new Slick.Event(),\n      \"onBeforeEditCell\": new Slick.Event(),\n      \"onBeforeCellEditorDestroy\": new Slick.Event(),\n      \"onBeforeDestroy\": new Slick.Event(),\n      \"onActiveCellChanged\": new Slick.Event(),\n      \"onActiveCellPositionChanged\": new Slick.Event(),\n      \"onDragInit\": new Slick.Event(),\n      \"onDragStart\": new Slick.Event(),\n      \"onDrag\": new Slick.Event(),\n      \"onDragEnd\": new Slick.Event(),\n      \"onSelectedRowsChanged\": new Slick.Event(),\n      \"onCellCssStylesChanged\": new Slick.Event(),\n\n      // Methods\n      \"registerPlugin\": registerPlugin,\n      \"unregisterPlugin\": unregisterPlugin,\n      \"getColumns\": getColumns,\n      \"setColumns\": setColumns,\n      \"getColumnIndex\": getColumnIndex,\n      \"updateColumnHeader\": updateColumnHeader,\n      \"setSortColumn\": setSortColumn,\n      \"setSortColumns\": setSortColumns,\n      \"getSortColumns\": getSortColumns,\n      \"autosizeColumns\": autosizeColumns,\n      \"getOptions\": getOptions,\n      \"setOptions\": setOptions,\n      \"getData\": getData,\n      \"getDataLength\": getDataLength,\n      \"getDataItem\": getDataItem,\n      \"setData\": setData,\n      \"getSelectionModel\": getSelectionModel,\n      \"setSelectionModel\": setSelectionModel,\n      \"getSelectedRows\": getSelectedRows,\n      \"setSelectedRows\": setSelectedRows,\n\n      \"render\": render,\n      \"invalidate\": invalidate,\n      \"invalidateRow\": invalidateRow,\n      \"invalidateRows\": invalidateRows,\n      \"invalidateAllRows\": invalidateAllRows,\n      \"updateCell\": updateCell,\n      \"updateRow\": updateRow,\n      \"getViewport\": getVisibleRange,\n      \"getRenderedRange\": getRenderedRange,\n      \"resizeCanvas\": resizeCanvas,\n      \"updateRowCount\": updateRowCount,\n      \"scrollRowIntoView\": scrollRowIntoView,\n      \"scrollRowToTop\": scrollRowToTop,\n      \"scrollCellIntoView\": scrollCellIntoView,\n      \"getCanvasNode\": getCanvasNode,\n      \"focus\": setFocus,\n\n      \"getCellFromPoint\": getCellFromPoint,\n      \"getCellFromEvent\": getCellFromEvent,\n      \"getActiveCell\": getActiveCell,\n      \"setActiveCell\": setActiveCell,\n      \"getActiveCellNode\": getActiveCellNode,\n      \"getActiveCellPosition\": getActiveCellPosition,\n      \"resetActiveCell\": resetActiveCell,\n      \"editActiveCell\": makeActiveCellEditable,\n      \"getCellEditor\": getCellEditor,\n      \"getCellNode\": getCellNode,\n      \"getCellNodeBox\": getCellNodeBox,\n      \"canCellBeSelected\": canCellBeSelected,\n      \"canCellBeActive\": canCellBeActive,\n      \"navigatePrev\": navigatePrev,\n      \"navigateNext\": navigateNext,\n      \"navigateUp\": navigateUp,\n      \"navigateDown\": navigateDown,\n      \"navigateLeft\": navigateLeft,\n      \"navigateRight\": navigateRight,\n      \"gotoCell\": gotoCell,\n      \"getTopPanel\": getTopPanel,\n      \"setTopPanelVisibility\": setTopPanelVisibility,\n      \"setHeaderRowVisibility\": setHeaderRowVisibility,\n      \"getHeaderRow\": getHeaderRow,\n      \"getHeaderRowColumn\": getHeaderRowColumn,\n      \"getGridPosition\": getGridPosition,\n      \"flashCell\": flashCell,\n      \"addCellCssStyles\": addCellCssStyles,\n      \"setCellCssStyles\": setCellCssStyles,\n      \"removeCellCssStyles\": removeCellCssStyles,\n      \"getCellCssStyles\": getCellCssStyles,\n\n      \"init\": finishInitialization,\n      \"destroy\": destroy,\n\n      // IEditor implementation\n      \"getEditorLock\": getEditorLock,\n      \"getEditController\": getEditController\n    });\n\n    init();\n  }\n}(jQuery));\n"]}