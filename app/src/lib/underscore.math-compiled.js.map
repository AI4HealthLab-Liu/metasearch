{"version":3,"sources":["underscore.math.js"],"names":[],"mappings":"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","file":"underscore.math-compiled.js","sourcesContent":["//     Underscore.math.js 0.1.2\n//     (c) 2012 Kai Chang\n//     Underscore.math is freely distributable under the MIT license.\n//     Portions of Underscore.math are inspired or borrowed from MooTools Array.Math,\n//     http://github.com/syntagmatic/underscore.math\n//     \n//     Requires Underscore.js\n//     http://underscorejs.org/\n\n(function() {\n\n  var math = this.math = {};\n\n  // Arithmetic mean\n  // math.mean([1,2,3])\n  //   => 2\n  math.mean = math.ave = math.average = function(obj, key) {\n    return math.sum(obj, key) / _(obj).size();\n  };\n\n  // math.median([1,2,3,4])\n  //   => 2.5\n  //   TODO {}, [{}]\n  math.median = function(arr) {\n    var arr = arr.slice(0); // create copy\n    var middle = (arr.length + 1) /2;\n    var sorted = math.sort(arr);\n    return (sorted.length % 2) ? sorted[middle - 1] : (sorted[middle - 1.5] + sorted[middle - 0.5]) / 2;\n  };\n\n  // Power, exponent\n  // math.pow(2,3)\n  //   => 8\n  math.pow = function(x, n) {\n     if (_.isNumber(x))\n        return Math.pow(x, n);\n     if (_.isArray(x))\n        return _.map(x, function(i) { return _.pow(i,n); });\n  };\n\n  // Scale to max value\n  // math.scale(1,[2,5,10])\n  //   => [ 0.2, 0.5, 1]\n  math.scale = function(arr, max) {\n    var max = max || 1;\n    var max0 = _.max(arr);\n    return _.map(arr, function(i) { return i * (max/max0); });\n  };\n\n  // Slope between two points\n  // math.slope([0,0],[1,2])\n  //   => 2\n  math.slope = function(x, y) {\n    return (y[1] - x[1]) / (y[0]-x[0]);\n  };\n\n  // Numeric sort\n  // math.sort([3,1,2])\n  //   => [1,2,3]\n  math.sort = function(arr) {\n    return _(arr).sortBy(_.identity);\n  };\n\n   // math.stdDeviation([1,2,3])\n  //   => 0.816496580927726\n  math.stdDeviation = math.sigma = function(arr) {\n    return Math.sqrt(_(arr).variance());\n  };\n\n  // Sum of array\n  // math.sum([1,2,3])\n  //   => 6\n  // math.sum([{b: 4},{b: 5},{b: 6}], 'b')\n  //   => 15\n  math.sum = function(obj, key) {\n    if (_.isArray(obj) && typeof obj[0] === 'number') {\n      var arr = obj;\n    } else {\n      var key = key || 'value';\n      var arr = _(obj).pluck(key);\n    }\n    var val = 0;\n    for (var i=0, len = arr.length; i<len; i++)\n      val += (arr[i]-0);\n    return val;\n  };\n\n  // math.transpose(([1,2,3], [4,5,6], [7,8,9]])\n  //   => [[1,4,7], [2,5,8], [3,6,9]]\n  math.transpose = function(arr) {\n    var trans = [];\n    _(arr).each(function(row, y){\n      _(row).each(function(col, x){\n        if (!trans[x]) trans[x] = [];\n        trans[x][y] = col;\n      });\n    });\n    return trans;\n  };\n \n  // math.variance([1,2,3])\n  //   => 2/3\n  math.variance = function(arr) {\n    var mean = _(arr).mean();\n    var variance = function(x) { return _(x-mean).pow(2); };\n    return _(arr).chain().map(variance).mean().value();\n  };\n  \n  // Standard score, assuming normal distribution\n  // math.zscore([1,2,3])\n  //   => [-1.224744871391589, 0, 1.224744871391589]\n  math.zscore = function(obj, key) {\n    if (_.isArray(obj) && typeof obj[0] === 'number') {\n      var arr = obj;\n    } else {\n      var key = key || 'value';\n      var arr = _(obj).pluck(key);\n    }\n\n    var n = arr.length,\n        mean = _(arr).mean(),\n        sigma = _(arr).stdDeviation();\n    var zscore = function(d) { return (d-mean)/sigma; };\n    return _(arr).map(zscore);\n  };\n\n  // math.movingAvg([1,2,3,4,5], 3);\n  //   => [2,3,4]\n  math.movingAvg = function(arr, size) {\n    var win, i, newarr = [];\n    for(i = size-1; i <= arr.length; i++) {\n      win = arr.slice(i-size, i);\n      if (win.length === size) {\n        newarr.push(_.mean(win)); \n      }\n    }\n    return newarr;\n  };\n  \n  // add methods to Underscore.js namespace\n  _.mixin(math);\n\n})();\n"]}